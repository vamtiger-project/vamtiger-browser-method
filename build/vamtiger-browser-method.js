!function(){"use strict";const e=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};function t(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t)).next())})}var n,r,o,a,s,i,c,l,u,m,d,f,h,p,v,w;!function(e){e.window="window",e.worker="worker"}(n||(n={})),function(e){e.nowhere="",e.everyWhere="*"}(r||(r={})),function(e){e.localHost="localhost"}(o||(o={})),function(e){e.vamtigerBrowserMethod="vamtiger-browser-method.js"}(a||(a={})),function(e){e.js="text/javascript",e.json="application/json",e.jsonld="application/ld+json"}(s||(s={})),function(e){e.type="type"}(i||(i={})),function(e){e.vamtigerElementQuery="vamtigerLoadElementQueryCss",e.elementQueryCssLoaded="elementQueryCssLoaded"}(c||(c={})),function(e){e.failedToLoadScript="Failed to load script",e.windowPropertyNotSet="Window property not set",e.unsupportedFeature="Unsupported feature",e.customElementAreadyDefined="Custom element already defined",e.noElementName="No Element Name",e.noTemplateUrl="No Template URL",e.noElementSelector="No Template Selector",e.noTemplateForUrl="No Template for URL",e.noTemplate="No Template",e.noElementForSelector="No Element for Selector",e.noJsonLdParameter='No "jsonLd" property set'}(l||(l={})),function(e){e.nothing="",e.slash="/",e.dash="-",e.pipe="|",e.comma=",",e.backTick="`",e.doubleQuote='"'}(u||(u={})),function(e){e.div="div",e.template="template"}(m||(m={})),function(e){e.stylesheet="stylesheet"}(d||(d={})),function(e){e.script="script",e.link="link",e.style="style"}(f||(f={})),function(e){e.lastStylesheet="style:last-of-type",e.lastMetaElement="head > meta:last-of-type",e.webcomponentsjs='script[src*="@webcomponents/webcomponentsjs"]',e.style="style",e.stylesheet=' link[rel="stylesheet"]',e.vamtigerBrowserMethodJsonJs='[src$="vamtiger-browser-method.js.json.js"]',e.vamtigerBrowserMethodJson='[data-name$="vamtiger-browser-method.js.json"]',e.vamtigerBrowserMethod='[data-name$="vamtiger-browser-method.js"]'}(h||(h={})),function(e){e.loadElementQueryCss="vamtiger-load-element-query-css"}(p||(p={})),function(e){e.style="style",e.stylesheet="stylesheet"}(v||(v={})),function(e){e.ignore="ignore",e.removeRedundantScripts="removeRedundantScripts"}(w||(w={}));var y=/:{1,2}host/gm,g=(new RegExp(u.dash,"g"),/\W+/g),E={worker:[h.vamtigerBrowserMethod].join(u.comma),redundantScripts:[h.vamtigerBrowserMethodJsonJs,h.vamtigerBrowserMethodJson,h.vamtigerBrowserMethod].join(u.comma)},S=postMessage;function b(e){}var j=u.nothing;var L=u.nothing,M=g,T=function(e){return e.split(M).map(function(e,t){return!t&&e.toLowerCase()||e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}).join(L)},k=y,C=u.nothing;function _(e){var t=e.css,n=e.stylesheetName,r=void 0===n?C:n,o=e.hostName,a=void 0===o?C:o,s=function(e){var t=e.selector,n=void 0===t?j:t,r=e.properties,o=void 0===r?{}:r,a=e.dataset,s=void 0===a?{}:a,i=e.attributes,c=void 0===i?{}:i,l=o.id,u=document.head,m=u.querySelector(h.lastMetaElement),d=Object.keys(c),f=l&&(window[l]||n&&u.querySelector(n)),p=!f&&document.createElement("meta"),v=f||p;return p&&(Object.assign(p,o),Object.assign(p.dataset,s),m&&m.nextElementSibling?u.insertBefore(p,m.nextElementSibling):u.appendChild(p)),d.forEach(function(e){return!v.hasAttribute(e)&&v.setAttribute(void 0,c[e])}),v}({properties:{id:p.loadElementQueryCss}}),i=T(r),c=s.dataset,l=!c.hasOwnProperty(a)&&a&&t.replace(k,a)||t,u=self.EQCSS;l&&u&&(u.register(u.parse(l)),i?c[i]=C:a&&(c[a]=C))}var P=l.failedToLoadScript,A=d.stylesheet,q=f.script,B=f.link,N=f.style,H=function(e){return new Promise(function(t,n){var r=document.head,o=document.body,a=e,c=a.js,l=a.name,u=a.jsonld,m=a.removeFromDom,d=e.src,f=e,h=f.css,p=f.name,v=e.href,w=e.json,y=e.hasOwnProperty("src")||e.hasOwnProperty("href"),g=(c||d)&&q||h&&N||v&&B,E=d&&'script[src="'+d+'"]'||v&&'link[href="'+v+'"]'||c&&l&&'script[data-name="'+l+'"]'||h&&p&&'style[data-name="'+p+'"]',S=r.querySelector(E)||o.querySelector(E),b=E&&g&&document.createElement(g);function j(){b&&(M(),m&&r.removeChild(b),t(b))}function L(e){M(),console.error(e),n(new Error(""+P))}function M(){b&&(b.removeEventListener("load",j),b.removeEventListener("error",L))}b instanceof HTMLScriptElement?d?b.src=d:(w||c)&&(b.innerHTML=w||c,b.dataset.name=l,u?b.setAttribute(i.type,s.jsonld):w&&b.setAttribute(i.type,s.json)):b instanceof HTMLLinkElement?(b.rel=A,b.href=v):b instanceof HTMLStyleElement&&(b.innerHTML=h,b.dataset.name=p,_({css:h,stylesheetName:p})),S?t(S):b&&(b.addEventListener("load",j),b.addEventListener("error",L),r.appendChild(b),y||j())})};var O=l.unsupportedFeature,J=l.customElementAreadyDefined;var R=u.dash;function U(e){return new Promise(function(t,n){var r=self.requestIdleCallback;r?r(function(){return x(e,t)}):x(e,t)})}function x(e,n){return t(this,void 0,void 0,function(){var t,r,o,a,s;return __generator(this,function(i){switch(i.label){case 0:return t=e.container,r=e.name,o=Array.from(t.content.querySelectorAll(h.style)).map(function(e,t){return{name:[r,v.style,t++].join(R),css:e.innerHTML}}),a=Array.from(t.content.querySelectorAll(h.stylesheet)).map(function(e,t){return{name:[r,v.stylesheet,t++].join(R),href:e.href}}),[4,Promise.all(o.map(H).concat(a.map(H)))];case 1:return s=i.sent(),n(s),[2]}})})}var F=l.noElementName,Q=l.noTemplate,V=l.noElementForSelector;var W=l.noElementName,D=l.noElementSelector,I=l.noTemplateUrl,$=l.noTemplateForUrl,z=l.noElementForSelector;function G(n,r){return t(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return n.url?[4,function(n){return t(this,void 0,void 0,function(){var t,r,o,a,s,i,c,l;return __generator(this,function(u){switch(u.label){case 0:return t=n.name,r=n.url,o=n.selector,a=n.loadStylesheets,document.head,(i=t&&o&&r)?[4,fetch(r).then(function(e){return e.text()})]:[3,2];case 1:i=u.sent(),u.label=2;case 2:if(c=(s=i)&&document.createElement(m.template),l=null,!t)throw new Error(W);if(!o)throw new Error(D);if(!r)throw new Error(I);if(!s)throw new Error($);return c?(c.innerHTML=s,l=c.content.querySelector(o),a&&l?[4,U(e({},n,{container:c}))]:[3,4]):[3,5];case 3:u.sent(),u.label=4;case 4:u.label=5;case 5:if(!l)throw new Error(z);return l.setAttribute("dataset-name",t),[2,l]}})})}(n)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,function(n){return t(this,void 0,void 0,function(){var t,r,o,a,s,i;return __generator(this,function(c){switch(c.label){case 0:if(t=n.name,r=n.template,o=n.loadStylesheets,a=n.selector,s=t&&r&&document.createElement(m.template),i=null,!t)throw new Error(F);if(!r)throw new Error(Q);return s?(s.innerHTML=r,i=a&&s.content.firstElementChild&&s.content.firstElementChild.querySelector(a)||s.content.firstElementChild,o&&i?[4,U(e({},n,{container:s}))]:[3,2]):[3,3];case 1:c.sent(),c.label=2;case 2:c.label=3;case 3:if(!i)throw new Error(V);return i.dataset.name=t,[2,i]}})})}(n)];case 3:o=a.sent(),a.label=4;case 4:return r(o),[2]}})})}var K=JSON.parse,X=new Map;function Y(e){var n=this,r=e.jsonLd;return new Promise(function(e,o){return t(n,void 0,void 0,function(){var t,n,o,a,s,i,c,l,u;return __generator(this,function(m){switch(m.label){case 0:return t=document.head,[4,H({src:r})];case 1:return m.sent(),n='script[type="application/ld+json"][data-json-ld="'+r+'"]',o='script[type="application/json"][data-json-ld="'+r+'"]',[4,Promise.all([Array.from(t.querySelectorAll(n)).map(function(e){var t=e.innerHTML;return K(t)}),t.querySelector(o)])];case 2:return a=m.sent(),s=a[0],i=a[1],c=i&&K(i.innerHTML)||{},l={jsonLd:s,json:c},(u=X.get(r))?u.add(e):X.set(r,new Set([e])),(u=X.get(r))&&s.length&&(Array.from(u).forEach(function(e){e(l),u.delete(e)}),u.size||X.delete(r)),[2]}})})})}var Z=l.noJsonLdParameter;function ee(){return self.hasOwnProperty("WorkerGlobalScope")&&n.worker||n.window}var te,ne=JSON.parse;function re(){return self.VamtigerBrowserMethod.envrironment===n.window}function oe(){return self.VamtigerBrowserMethod.envrironment===n.worker}function ae(e){var t,n;re()&&(t=e.selector,n=document.head,Array.from(n.querySelectorAll(t)).forEach(function(e){return n.removeChild(e)})),oe()&&function(e){var t=e.selector,n={action:w.removeRedundantScripts,params:{selector:t}};S(n)}(e)}var se=((te={})[w.ignore]=b,te[w.removeRedundantScripts]=ae,te);function ie(e){return t(this,void 0,void 0,function(){var t,n,r,o,a,s,i;return __generator(this,function(c){return t=self.VamtigerBrowserMethod,n=t.worker,r=function(e){try{var t=e.data,n="string"==typeof t&&ne(t)||t;return"string"==typeof n.params&&(n.params=ne(n.params)),n}catch(e){return{action:w.ignore,params:{}}}}(e),o=r.action,a=r.params,s=se[o]||b,(i=s(a))&&(oe&&S(i),re&&n&&n.postMessage(i)),[2]})})}var ce=a.vamtigerBrowserMethod;function le(){return t(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return n=window.location,(e=o.localHost===n.hostname)?[4,fetch(ce).then(function(e){return e.ok}).catch(function(e){return""})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[2,e&&ce||""]}var n})})}var ue,me={type:s.js};function de(){re()&&function(){t(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e=self.VamtigerBrowserMethod,n=e,[4,function(){return t(this,void 0,void 0,function(){var e,t,n,r,o,a,s,i;return __generator(this,function(c){switch(c.label){case 0:return[4,le()];case 1:return e=c.sent(),t=document.head,n=URL.createObjectURL,r=!ue&&E.worker,o=(r&&Array.from(t.querySelectorAll(r))||[]).map(function(e){return e.innerHTML}).filter(function(e){return e}),a=o&&o.length&&new Blob(o,me),s=a&&n&&n(a),(i=s&&new Worker(e||s))&&i.addEventListener("message",ie),[2,ue=ue||i]}})})}()];case 1:return n.worker=r.sent(),[2]}})})}()}function fe(){oe()&&(addEventListener("message",ie),ae({selector:E.redundantScripts}))}var he=ee(),pe={loadScript:H,loadScripts:function(e){return Promise.all(e.map(H))},loadScriptsSequentially:function(e){return new Promise(function(n,r){var o=new Set,a=Promise.resolve();return e.forEach(function(e){a=a.then(function(){return t(void 0,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(H))];case 1:return[2,t.sent()]}})})}).then(function(e){return e.forEach(function(e){return o.add(e)})})}),a=a.then(function(){return n(Array.from(o))})})},loadShadowStylesheet:function(e){var t=e.css,n=e.element,r=n.shadowRoot,o=(n.localName,r&&r.querySelector(h.lastStylesheet)),a=r&&document.createElement("style");a&&r&&(a.innerHTML=t,o&&o.nextElementSibling?r.insertBefore(a,o.nextElementSibling):r.appendChild(a))},defineCustomElement:function e(t){var n=t.name,r=t.constructor,o=t.ignore,a=self.customElements,s=a&&a.define,i=s&&a.get&&a.get(n);if(s&&!i)a.define(n,r);else{if(i)throw new Error(J+": "+n);if(o)throw new Error(O+": Custom Elements - "+n);e({name:n,constructor:r,ignore:!0})}},pause:function(e){var t=e.milliseconds,n=void 0===t?1e3:t;return new Promise(function(e,t){return setTimeout(e,n)})},getElement:function(e){return t(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,n){var r=self.requestIdleCallback;r?r(function(){return G(e,t)}):G(e,t)})]})})},getData:function(e){var t=e.jsonLd;return new Promise(function(e,n){var r=self.requestIdleCallback;t?r?r(function(){return Y({jsonLd:t}).then(e)}):Y({jsonLd:t}).then(e):n(new Error(Z))})},getEnvironment:ee,envrironment:he};!function(){try{var e=self.VamtigerBrowserMethod;e||(self.VamtigerBrowserMethod=pe,de(),fe())}catch(e){!function(e){throw console.error(e),e}(e)}}()}();
//# sourceMappingURL=vamtiger-browser-method.js.map
