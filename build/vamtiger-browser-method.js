!function(){"use strict";const e=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};function t(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t)).next())})}var n,r,o,a,i,s,l,c,u,d,m;!function(e){e.jsonld="application/ld+json"}(n||(n={})),function(e){e.type="type"}(r||(r={})),function(e){e.vamtigerElementQuery="vamtigerLoadElementQueryCss",e.elementQueryCssLoaded="elementQueryCssLoaded"}(o||(o={})),function(e){e.failedToLoadScript="Failed to load script",e.windowPropertyNotSet="Window property not set",e.unsupportedFeature="Unsupported feature",e.customElementAreadyDefined="Custom element already defined",e.noElementName="No Element Name",e.noTemplateUrl="No Template URL",e.noElementSelector="No Template Selector",e.noTemplateForUrl="No Template for URL",e.noTemplate="No Template",e.noElementForSelector="No Element for Selector"}(a||(a={})),function(e){e.nothing="",e.slash="/",e.dash="-"}(i||(i={})),function(e){e.div="div",e.template="template"}(s||(s={})),function(e){e.stylesheet="stylesheet"}(l||(l={})),function(e){e.script="script",e.link="link",e.style="style"}(c||(c={})),function(e){e.lastStylesheet="style:last-of-type",e.lastMetaElement="head > meta:last-of-type",e.webcomponentsjs='script[src*="@webcomponents/webcomponentsjs"]',e.style="style",e.stylesheet=' link[rel="stylesheet"]'}(u||(u={})),function(e){e.loadElementQueryCss="vamtiger-load-element-query-css"}(d||(d={})),function(e){e.style="style",e.stylesheet="stylesheet"}(m||(m={}));var f=/:{1,2}host/gm,h=(new RegExp(i.dash,"g"),/\W+/g),p=i.nothing;var w=i.nothing,y=h,v=function(e){return e.split(y).map(function(e,t){return!t&&e.toLowerCase()||e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}).join(w)},E=f,S=i.nothing;function g(e){var t=e.css,n=e.stylesheetName,r=void 0===n?S:n,o=e.hostName,a=void 0===o?S:o,i=function(e){var t=e.selector,n=void 0===t?p:t,r=e.properties,o=void 0===r?{}:r,a=e.dataset,i=void 0===a?{}:a,s=e.attributes,l=void 0===s?{}:s,c=o.id,d=document.head,m=d.querySelector(u.lastMetaElement),f=Object.keys(l),h=c&&(window[c]||n&&d.querySelector(n)),w=!h&&document.createElement("meta"),y=h||w;return w&&(Object.assign(w,o),Object.assign(w.dataset,i),m&&m.nextElementSibling?d.insertBefore(w,m.nextElementSibling):d.appendChild(w)),f.forEach(function(e){return!y.hasAttribute(e)&&y.setAttribute(void 0,l[e])}),y}({properties:{id:d.loadElementQueryCss}}),s=v(r),l=i.dataset,c=!l.hasOwnProperty(a)&&a&&t.replace(E,a)||t,m=window.EQCSS;c&&m&&(m.register(m.parse(c)),s?l[s]=S:a&&(l[a]=S))}var b=a.failedToLoadScript,L=l.stylesheet,T=c.script,j=c.link,C=c.style,N=function(e){return new Promise(function(t,o){var a=document.head,i=document.body,s=e,l=s.js,c=s.name,u=s.jsonld,d=s.removeFromDom,m=e.src,f=e,h=f.css,p=f.name,w=e.href,y=e.hasOwnProperty("src")||e.hasOwnProperty("href"),v=(l||m)&&T||h&&C||w&&j,E=m&&'script[src="'+m+'"]'||w&&'link[href="'+w+'"]'||l&&c&&'script[data-name="'+c+'"]'||h&&p&&'style[data-name="'+p+'"]',S=a.querySelector(E)||i.querySelector(E),N=E&&v&&document.createElement(v);function P(){N&&(q(),d&&a.removeChild(N),t(N))}function M(e){q(),console.error(e),o(new Error(""+b))}function q(){N&&(N.removeEventListener("load",P),N.removeEventListener("error",M))}N instanceof HTMLScriptElement?m?N.src=m:l&&(N.innerHTML=l,N.dataset.name=c,u&&N.setAttribute(r.type,n.jsonld)):N instanceof HTMLLinkElement?(N.rel=L,N.href=w):N instanceof HTMLStyleElement&&(N.innerHTML=h,N.dataset.name=p,g({css:h,stylesheetName:p})),S?t(S):N&&(N.addEventListener("load",P),N.addEventListener("error",M),a.appendChild(N),y||P())})};var P=a.unsupportedFeature,M=a.customElementAreadyDefined;var q=i.dash;function _(e){return new Promise(function(t,n){var r=window.requestIdleCallback;r?r(function(){return A(e,t)}):A(e,t)})}function A(e,n){return t(this,void 0,void 0,function(){var t,r,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return t=e.container,r=e.name,o=Array.from(t.content.querySelectorAll(u.style)).map(function(e,t){return{name:[r,m.style,t++].join(q),css:e.innerHTML}}),a=Array.from(t.content.querySelectorAll(u.stylesheet)).map(function(e,t){return{name:[r,m.stylesheet,t++].join(q),href:e.href}}),[4,Promise.all(o.map(N).concat(a.map(N)))];case 1:return i=s.sent(),n(i),[2]}})})}var k=a.noElementName,H=a.noTemplate,O=a.noElementForSelector;var F=a.noElementName,x=a.noElementSelector,U=a.noTemplateUrl,Q=a.noTemplateForUrl,B=a.noElementForSelector;function D(n,r){return t(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return n.url?[4,function(n){return t(this,void 0,void 0,function(){var t,r,o,a,i,l,c,u;return __generator(this,function(d){switch(d.label){case 0:return t=n.name,r=n.url,o=n.selector,a=n.loadStylesheets,document.head,(l=t&&o&&r)?[4,fetch(r).then(function(e){return e.text()})]:[3,2];case 1:l=d.sent(),d.label=2;case 2:if(c=(i=l)&&document.createElement(s.template),u=null,!t)throw new Error(F);if(!o)throw new Error(x);if(!r)throw new Error(U);if(!i)throw new Error(Q);return c?(c.innerHTML=i,u=c.content.querySelector(o),a&&u?[4,_(e({},n,{container:c}))]:[3,4]):[3,5];case 3:d.sent(),d.label=4;case 4:d.label=5;case 5:if(!u)throw new Error(B);return u.setAttribute("dataset-name",t),[2,u]}})})}(n)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,function(n){return t(this,void 0,void 0,function(){var t,r,o,a,i;return __generator(this,function(l){switch(l.label){case 0:if(t=n.name,r=n.template,o=n.loadStylesheets,a=t&&r&&document.createElement(s.template),i=null,!t)throw new Error(k);if(!r)throw new Error(H);return a?(a.innerHTML=r,i=a.content.firstElementChild,o&&i?[4,_(e({},n,{container:a}))]:[3,2]):[3,3];case 1:l.sent(),l.label=2;case 2:l.label=3;case 3:if(!i)throw new Error(O);return i.dataset.name=t,[2,i]}})})}(n)];case 3:o=a.sent(),a.label=4;case 4:return r(o),[2]}})})}var R=JSON.parse;function I(e){var n=e.jsonLd;return t(this,void 0,void 0,function(){var e,t,r,o;return __generator(this,function(a){switch(a.label){case 0:return e=document.head,[4,N({src:n})];case 1:return a.sent(),t='script[type="application/ld+json"][data-json-ld="'+n+'"]',r=e.querySelector(t),o=r&&r.innerHTML,[2,o&&R(o)||{}]}})})}var V=window.VamtigerBrowserMethod,W={loadScript:N,loadScripts:function(e){return Promise.all(e.map(N))},loadScriptsSequentially:function(e){return new Promise(function(n,r){var o=new Set,a=Promise.resolve();return e.forEach(function(e){a=a.then(function(){return t(void 0,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(N))];case 1:return[2,t.sent()]}})})}).then(function(e){return e.forEach(function(e){return o.add(e)})})}),a=a.then(function(){return n(Array.from(o))})})},loadShadowStylesheet:function(e){var t=e.css,n=e.element,r=n.shadowRoot,o=(n.localName,r&&r.querySelector(u.lastStylesheet)),a=r&&document.createElement("style");a&&r&&(a.innerHTML=t,o&&o.nextElementSibling?r.insertBefore(a,o.nextElementSibling):r.appendChild(a))},defineCustomElement:function e(t){var n=t.name,r=t.constructor,o=t.ignore,a=window.customElements,i=a&&a.define,s=i&&a.get&&a.get(n);if(i&&!s)a.define(n,r);else{if(s)throw new Error(M+": "+n);if(o)throw new Error(P+": Custom Elements - "+n);e({name:n,constructor:r,ignore:!0})}},pause:function(e){var t=e.milliseconds,n=void 0===t?1e3:t;return new Promise(function(e,t){return setTimeout(e,n)})},getElement:function(e){return t(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,n){var r=window.requestIdleCallback;r?r(function(){return D(e,t)}):D(e,t)})]})})},getData:function(e){var t=e.jsonLd;return new Promise(function(e,n){var r=window.requestIdleCallback;t?r?r(function(){return I({jsonLd:t}).then(e)}):I({jsonLd:t}).then(e):e({})})}};try{V||(window.VamtigerBrowserMethod=W)}catch(e){global.VamtigerBrowserMethod=V}}();
//# sourceMappingURL=vamtiger-browser-method.js.map
