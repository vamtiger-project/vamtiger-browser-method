{"version":3,"file":"vamtiger-browser-method.js","sources":["../source/types.ts","../node_modules/tslib/tslib.js","../source/load-ts-lib.ts","../source/get-meta-element.ts","../source/load-element-query-css.ts","../source/config.ts","../source/get-transpiled-js.ts","../source/is-window.ts","../source/is-worker.ts","../source/is-service-worker.ts","../source/get-service-worker-clients.ts","../source/send-message-from-service-worker.ts","../source/send-message.ts","../source/is-json-script.ts","../source/remove-redundant-scripts.ts","../source/load-script.ts","../source/load-scripts.ts","../source/load-scripts-sequentially.ts","../source/load-shadow-stylesheet.ts","../source/get-db-params.ts","../source/save-indexed-db-data.ts","../source/get-indexed-db-data.ts","../source/handle-load-script.ts","../source/get-text-mode-css.ts","../source/save-custom-element-name.ts","../source/define-custom-element.ts","../source/pause.ts","../source/load-container-stylesheets.ts","../source/get-element-from-template.ts","../source/get-element-from-url.ts","../source/get-element.ts","../source/queue.ts","../source/dequeue.ts","../source/get-web-component-data.ts","../source/save-web-component-data.ts","../source/load-web-component-data.ts","../source/get-json-ld.ts","../source/is-text-mode.ts","../source/view-json-ld.ts","../source/get-data.ts","../source/get-environment.ts","../source/get-message-data.ts","../source/save-support.ts","../source/get-cache.ts","../source/set-support.ts","../source/ignore-message.ts","../source/load-method.ts","../source/get-message-id.ts","../source/get-method-result.ts","../source/update-method.ts","../source/import-dependencies.ts","../source/remove-dependency-url.ts","../source/handle-message.ts","../source/is-local-host.ts","../source/get-local-host-worker-url.ts","../source/get-worker-url.ts","../source/get-worker.ts","../source/get-intersection-observer.ts","../source/get-page-relative-url.ts","../source/get-service-worker-registration.ts","../source/setup-window.ts","../source/setup-worker.ts","../source/html/index.ts","../source/get-template.ts","../source/get-microdata-caption.ts","../source/get-tab-link.ts","../source/get-email-link.ts","../source/get-json-ld-array.ts","../source/load-dependencies.ts","../source/dispatch-event.ts","../source/get-fetch-response.ts","../source/update-request-cache.ts","../source/get-cached-fetch-response.ts","../source/handle-fetch-request.ts","../source/handle-service-worker-activation.ts","../source/setup-service-worker.ts","../source/vamtiger-browser-method.ts"],"sourcesContent":["import * as tslib from 'tslib/tslib';\nimport { requestIdleCallback } from 'requestidlecallback';\nimport * as lodash from 'lodash';\n\nexport enum Environment {\n    window = 'window',\n    worker = 'worker',\n    serviceWorker = 'serviceWorker',\n    unknown = 'unknown'\n}\n\nexport enum CacheName {\n    vamtigerBrowserMethod = 'vamtiger-browser-method'\n}\n\nexport enum EventName {\n    vamtigerBrowserMethodReady = 'vamtigerBrowserMethodReady'\n}\n\nexport enum TimeoutDuration {\n    webComponent = 30000,\n    indexDbIsAccessible = 100\n}\n\nexport enum MessageQueueName {\n    webComponent = 'webComponent'\n}\n\nexport enum Prefix {\n    vamtigerBrowserMethod = 'vamtiger-browser-method',\n    db = 'vamtiger-browser-method',\n    messageIdWindow = 'vamtiger-browser-method-window',\n    messageIdWorker = 'vamtiger-browser-method-worker',\n    messageIdServiceWorker = 'vamtiger-browser-method-service-worker',\n    messageIdUnknownEnvironment = 'vamtiger-browser-method-unknown-environment'\n}\n\nexport enum ElementId {\n    metaElement = 'vamtiger-browser-method'\n}\n\nexport enum Origin {\n    nowhere = '',\n    everyWhere = '*'\n}\n\nexport enum HostName {\n    localHost = 'localhost'\n}\n\nexport enum LocalHostRelativePath {\n    vamtigerBrowserMethod = 'vamtiger-browser-method.js'\n}\n\nexport enum ScriptType {\n    js = 'text/javascript',\n    babel = 'text/babel',\n    json = 'application/json',\n    jsonld = 'application/ld+json'\n}\n\nexport enum ScriptAttribute {\n    type = 'type'\n}\n\nexport enum DataAttribute {\n    vamtigerElementQuery = 'vamtigerLoadElementQueryCss',\n    elementQueryCssLoaded = 'elementQueryCssLoaded',\n    customElementName = 'customElementName',\n    visible = 'visible'\n}\n\nexport enum ErrorMessage {\n    failedToLoadScript = 'Failed to load script',\n    windowPropertyNotSet = 'Window property not set',\n    unsupportedFeature = 'Unsupported feature',\n    customElementAreadyDefined = 'Custom element already defined',\n    noElementName = 'No Element Name',\n    noTemplateUrl = 'No Template URL',\n    noElementSelector = 'No Template Selector',\n    noTemplateForUrl = 'No Template for URL',\n    noTemplate = 'No Template',\n    noElementForSelector = 'No Element for Selector',\n    noJsonLdParameter = 'No \"jsonLd\" property set',\n    scriptLoadedButMethodNameNotFound = 'Failed to load method: Script loaded, but method name not found',\n    crossOriginMethodsNotAllowed = 'Cross-Origin methods are not allowed'\n}\n\nexport enum StringConstant {\n    nothing = '',\n    slash = '/',\n    dash = '-',\n    pipe = '|',\n    comma = ',',\n    backTick = '`',\n    doubleQuote = '\"',\n    commaSpace = ', ',\n    space = ' ',\n    period = '.',\n    newline = '\\n',\n    semiColon = ';'\n}\n\nexport enum TagName {\n    div = 'div',\n    template = 'template'\n}\n\nexport enum LinkRel {\n    stylesheet = 'stylesheet'\n}\n\nexport enum LoadScriptElement {\n    script = 'script',\n    link = 'link',\n    style = 'style'\n}\n\nexport enum Selector {\n    lastStylesheet = 'style:last-of-type',\n    lastMetaElement = 'head > meta:last-of-type',\n    webcomponentsjs = 'script[src*=\"@webcomponents\\/webcomponentsjs\"]',\n    style = 'style',\n    stylesheet = ' link[rel=\"stylesheet\"]',\n    vamtigerBrowserMethodJsonJs = '[src$=\"vamtiger-browser-method.js.json.js\"]',\n    worker = '[src$=\"js.json.js\"][data-worker]',\n    workderDependency = 'script[data-worker-dependency]',\n    vamtigerBrowserMethodJson = '[data-name$=\"vamtiger-browser-method.js.json\"]',\n    vamtigerBrowserMethod = '[data-name$=\"vamtiger-browser-method.js\"]',\n    script = 'script',\n    jsonScript = 'script[type=\"application/json\"]',\n    jsonLdScript = 'script[type=\"application/ld+json\"]',\n    a = 'a',\n    linkedDataCaption = '[data-linked-data-caption]',\n    linkedDataCaptionElement = '[data-linked-data-caption-element]',\n    jsonLdViewer = 'vamtiger-json-ld-viewer',\n    transpiledJs = '[data-transpiled-js]',\n    htmlTextMode = 'html[data-vamtiger-text-mode]',\n    customElementNameMetaElement = 'meta[data-custom-element-name]',\n    dependencyUrlMetaElement = 'meta[data-dependency]',\n    urlMetaElement = 'meta[data-url]'\n}\n\nexport enum TextModeElementName {\n    vamtigerJsonLdViewer = 'vamtiger-json-ld-viewer'\n}\n\nexport enum  MetaElementName {\n    loadElementQueryCss = 'vamtiger-load-element-query-css'\n}\n\nexport enum WorkerType {\n    all = 'all',\n    worker = 'worker',\n    serviceWorker = 'serviceWorker'\n}\n\nexport enum ScriptNameSuffix {\n    style = 'style',\n    stylesheet = 'stylesheet'\n}\n\nexport enum ScriptName {\n    textMode = 'vamtiger-text-mode'\n}\n\nexport enum MessageAction {\n    ignore = 'ignore',\n    removeRedundantScripts = 'removeRedundantScripts',\n    setWorkerSupport = 'setWorkerSupport',\n    saveWebComponentData = 'saveWebComponentData',\n    getWebComponentData = 'getWebComponentData',\n    dequeue = 'dequeue',\n    loadWebComponentData = 'loadWebComponentData',\n    saveSupport = 'saveSupport',\n    saveCustomElementName = 'saveCustomElementName',\n    getTextModeCss = 'getTextModeCss',\n    loadScript = 'loadScript',\n    loadMethod = 'loadMethod',\n    updateMethod = 'updateMethod',\n    getMethodResult = 'getMethodResult',\n    importDependencies = 'importDependencies',\n    removeDependencyUrl = 'removeDependencyUrl'\n}\n\nexport enum DbName {\n    vamtigerBrowserSupport = 'vamtiger-browser-support'\n}\n\nexport enum DbStoreName {\n    support = 'support',\n    webComponent = 'web-component',\n    customElementName = 'custom-element-name'\n}\n\nexport enum DbMode {\n    readonly = 'readonly',\n    readwrite = 'readwrite',\n    versionchange = 'versionchange'\n}\n\nexport enum DbKeyPath {\n    webComponent = 'url',\n    support = 'environment',\n    customElementName = 'name'\n}\n\nexport enum Dependency {\n    lodash = 'https://cdn.jsdelivr.net/npm/lodash@4.17.11',\n    jsonLdViewer = 'https://vamtiger-project.github.io/vamtiger-json-ld-viewer/build/vamtiger-json-ld-viewer.js'\n}\n\nexport interface IDequeue {\n    key: string;\n    data: IAnyObject;\n}\n\nexport interface IGetDbParams {\n    storeName: DbStoreName;\n    keyPath: DbKeyPath;\n    mode: DbMode;\n}\n\nexport interface IGetDbParamsHandleUpgradeNeeded extends Pick<IDbParams, 'db'>{}\n\nexport interface IDbParams {\n    db: IDBDatabase;\n    transaction: IDBTransaction;\n    store: IDBObjectStore;\n}\n\nexport interface ILoadRemoteScriptParams {\n    src: string;\n}\n\nexport interface IRemoveDepencyUrl {\n    url: string;\n}\n\nexport interface ILoadRemoteStylesheetScriptParams {\n    href: string;\n}\n\nexport interface IIsJsonScript {\n    script: HTMLScriptElement;\n}\n\nexport interface ILoadLocalScriptParams {\n    name: string;\n    removeExisting?: boolean;\n    removeFromDom?: boolean;\n    workerDependency?: boolean;\n}\n\nexport interface ILoadScriptParams {\n    js: string;\n    jsonld?: boolean;\n}\n\nexport interface ISaveCustomeElementName {\n    name: string;\n}\n\nexport interface ILoadJsonScriptParams {\n    json: string;\n}\n\nexport interface ILoadStylesheetScriptParams {\n    css: string;\n}\n\nexport interface IAnyObject {\n    [key: string]: any;\n}\n\nexport interface IJsonData {\n    jsonLd: IAnyObject[];\n    json?: IAnyObject;\n}\n\nexport interface IJsonJsonLd {\n    index: number;\n    fields: {\n        [key: string]: string[];\n    }\n}\n\nexport interface IImportDependencies {\n    urls?: string[];\n}\n\nexport interface ILoadScript {\n    params: LocalScriptParams\n        | LocalStylesheetScriptParams\n        | ILoadRemoteScriptParams\n        | ILoadRemoteStylesheetScriptParams\n        | ILoadJsonScriptParams;\n    reject: (error: Error) => void\n}\n\nexport interface IUpdateMthod {\n    name: string;\n}\n\nexport interface IGetMethodResult {\n    messageId?: string;\n    name: string;\n    params: IAnyObject;\n}\n\nexport interface IGetMethodResultWindow extends IGetMethodResult {\n    resolve: (result: any) => void;\n    reject: (error: Error) => void;\n}\n\nexport interface IUpdateMthodWrapNamedMethod {\n    method: Function;\n}\n\nexport interface ILoadScriptLoadJsJsonJs {\n    src: string;\n    workerDependency?: boolean;\n}\n\nexport interface ILoadShadowStylesheet {\n    css: string;\n    element: HTMLElement;\n}\n\nexport interface IJsonScriptData {\n    name: string;\n    text: string;\n}\n\nexport interface IDefineCustomElement {\n    name: string;\n    constructor: {\n        new (): HTMLElement\n        prototype: HTMLElement;\n    };\n    ignore?: boolean;\n}\n\nexport interface IPause {\n    milliseconds: number;\n}\n\nexport interface IGetElementBase {\n    name: string;\n    loadStylesheets?: boolean;\n}\n\nexport interface IGetElementTemplate extends IGetElementBase {\n    template: string;\n    selector?: string;\n}\n\nexport interface IGetElementUrl extends IGetElementBase {\n    url: string;\n    selector:  string;\n}\n\nexport interface ILoadElementQueryCss {\n    css: string;\n    stylesheetName?: string;\n    hostName?: string;\n}\n\nexport interface IGetJsonLdArray {\n    jsonLd: IAnyObject;\n}\n\nexport interface IGetJsonLdArrayGetEntry {\n    key: string;\n    value: string | IAnyObject | IAnyObject[];\n}\n\nexport interface IGetMetaElement {\n    selector?: string;\n    properties?: {\n        id?: string;\n    };\n    attributes?: {\n        [key: string]: string;\n    };\n    dataset?: DOMStringMap;\n}\n\nexport interface IDispatchEvent {\n    eventName: EventName;\n    detail?: IAnyObject;\n}\n\nexport interface IGetBabelJs {\n    url?: string;\n    js?: string;\n}\n\nexport interface ILoadContainerStylesheets {\n    name: string;\n    container: HTMLTemplateElement;\n}\n\nexport interface IGetData {\n    jsonLd: string;\n    textMode?: boolean;\n}\n\nexport interface IGetDataResolve extends IGetData {\n    data: IJsonData;\n    jsonLd: string;\n    resolve: (data: IJsonData) => void\n}\n\nexport interface IGetJsonLd {\n    jsonLd: string;\n    textMode?: boolean;\n    loadJsonJsonLd?: boolean;\n}\n\nexport interface IViewJsonLd {\n    jsonLd: string;\n}\n\nexport interface IJosnLdImageObject {\n    \"@context\": string;\n    '@type': string;\n    name: string;\n    description: string;\n    author: {\n        '@type': string;\n        givenName: string;\n        familyName: string;\n        email: string;\n    };\n    datePublished: string;\n    contentUrl: string;\n}\n\nexport interface IMessageAction {\n    action: MessageAction;\n    params: IAnyObject & {\n        messageId?: string;\n        ports?: MessagePort[];\n    };\n    workerType?: WorkerType;\n}\n\nexport interface IRemoveRedundantScripts {\n    selector: string;\n}\n\nexport interface IRemoveRedundantScriptsRemoveScripts extends IRemoveRedundantScripts {\n    parent: HTMLElement;\n}\n\nexport interface IRemoveRedundantScriptsRemoveScriptsFromParent extends IRemoveRedundantScriptsRemoveScripts {\n    resolve?: () => void;\n    reject?: (error: Error) => void;\n}\n\nexport interface ISupport {\n    cache: boolean;\n    localStorage: boolean;\n    indexedDb: boolean;\n    indexedDbIsAccessible: boolean;\n    worker: boolean;\n    sharedWorker: boolean;\n    textEncoder: boolean;\n    textDecoder: boolean;\n}\n\nexport interface ILoadMethod {\n    name: string;\n    relativeUrl: string;\n}\n\nexport interface ILoadMethodWindow extends ILoadMethod {\n    resolve: () => void;\n    reject: (error: Error) => void;\n}\n\nexport interface ICustomElementName {\n    name: string;\n}\n\nexport interface ISaveSupport extends ISupport {\n    environment: Environment;\n}\n\nexport interface ISaveWebComponentData extends IWebComponentData {}\n\nexport interface IGetWebComponentData {\n    key: string;\n}\n\nexport interface IGetDbName {\n    dbName: DbName\n}\n\nexport interface ISaveIndexedDbData {\n    storeName: DbStoreName;\n    keyPath: DbKeyPath;\n    messageId?: string;\n    data: IndexDbData;\n    successAction?: MessageAction\n}\n\nexport interface IGetIndexedDbData {\n    storeName: DbStoreName;\n    keyPath: DbKeyPath;\n    key?: string;\n    messageId?: string;\n}\n\nexport interface ISaveIndexedDbDataHandleSuccess {\n    messageId?: string;\n    key: string;\n    action?: MessageAction;\n    data: IndexDbData;\n}\n\nexport interface IWebComponentData {\n    url: string;\n    created?: number;\n    messageId?: string;\n    jsonLd: IAnyObject[];\n    json: IAnyObject;\n}\n\nexport interface ISaveWebComponentDataWorker extends ISaveWebComponentData {}\n\nexport interface IMessageQueueEntry {\n    resolve: (result: any) => void;\n    reject: (reason: Error) => void;\n}\n\nexport interface IQueue extends NonNullable<Pick<IMessageQueueEntry, 'resolve' | 'reject'>> {\n    key: string;\n}\n\nexport interface IQueueHandleExpiredQueueEntry {\n    key: string;\n    queueEntry: IMessageQueueEntry;\n}\n\nexport interface ILoadData {\n    url: string;\n    loadJsonJsonLd?: boolean;\n}\n\nexport interface ILoadDataGetFeldData {\n    key: string;\n    urls: string[];\n}\n\nexport interface ILoadDataGetJsonJsonLd extends IJsonJsonLd {}\n\nexport interface IGetMicrodataCaption {\n    imageData: IAnyObject;\n    fieldKey: string;\n}\n\nexport interface IGetTemplate {\n    selector: Selector;\n    attributes?: IAttributes;\n    properties?: IProperties;\n}\n\nexport interface IProperties {\n    name?: string;\n    src?: string;\n    alt?: string;\n    innerHTML?: string;\n}\n\nexport interface IGetTabLink {\n    href: string;\n    text: string;\n}\n\nexport interface IGetEmailLink {\n    href: string;\n    text: string;\n}\n\nexport interface IVamtigerBrowserMethodLoadMethod {\n    [key: string]: Function;\n}\n\nexport interface ISetDependencyUrl {\n    script: HTMLScriptElement\n}\n\nexport interface ISetDependencyUrlWindow {\n    js: string;\n}\n\nexport type WebComponentDataResolve = (webComponent: IJsonData | undefined) => void;\n\nexport type ErrorResolve = (error: Error) => void;\n\nexport type MessageResponse = IMessageAction | undefined | null | false;\n\nexport type TsLibType = typeof tslib;\n\nexport type TsLibKey = keyof TsLibType;\n\nexport type TsLib = {\n    [K in TsLibKey]: TsLibType[K]\n}\n\nexport type LocalScriptParams = ILoadLocalScriptParams & ILoadScriptParams;\n\nexport type LocalStylesheetScriptParams = ILoadLocalScriptParams & ILoadStylesheetScriptParams;\n\nexport type LoadScriptParams = LocalScriptParams\n    | LocalStylesheetScriptParams\n    | ILoadRemoteScriptParams\n    | ILoadRemoteStylesheetScriptParams;\n\nexport type LoadScriptsParams = LoadScriptParams[];\n\nexport type LoadScriptsSequentiallyParams = LoadScriptsParams[];\n\nexport type DependencyKey = keyof typeof Dependency;\n\nexport type LoadedScript<P extends ILoadScript['params']> =\n    P extends ILoadScriptParams ? HTMLScriptElement :\n    P extends ILoadStylesheetScriptParams ? HTMLStyleElement :\n    P extends ILoadRemoteScriptParams ? HTMLScriptElement :\n    P extends ILoadRemoteStylesheetScriptParams ? HTMLLinkElement :\n    never;\n\nexport type LoadedScripts<P extends LoadScriptsParams> =\n    P extends ILoadScriptParams[] ? HTMLScriptElement[] :\n    P extends ILoadStylesheetScriptParams[] ? HTMLStyleElement[] :\n    P extends ILoadRemoteScriptParams[] ? HTMLScriptElement[] :\n    P extends ILoadRemoteStylesheetScriptParams[] ? HTMLLinkElement[] :\n    never;\n\nexport type LoadedScriptsSequentially<P extends LoadScriptsSequentiallyParams> =\n    P extends ILoadScriptParams[][] ? HTMLScriptElement[] :\n    P extends ILoadStylesheetScriptParams[][] ? HTMLStyleElement[] :\n    P extends ILoadRemoteScriptParams[][] ? HTMLScriptElement[] :\n    P extends ILoadRemoteStylesheetScriptParams[][] ? HTMLLinkElement[] :\n    never;\n\nexport type GetElementParams = IGetElementTemplate | IGetElementUrl;\n\nexport type VamtigerBrowserMethod = {\n    metaElement?: HTMLMetaElement;\n    loadScript: <P extends LocalScriptParams | LocalStylesheetScriptParams | ILoadRemoteScriptParams | ILoadRemoteStylesheetScriptParams>(params: P) => Promise<LoadedScript<P>>;\n    loadScripts: <P extends LoadScriptParams[]>(params: P) => Promise<LoadedScripts<P>>;\n    loadScriptsSequentially: <P extends LoadScriptParams[][]>(params: P) => Promise<LoadedScriptsSequentially<P>>;\n    loadMethod: (params: ILoadMethod) => Promise<boolean>;\n    loadShadowStylesheet: ({ css, element }: ILoadShadowStylesheet) => void;\n    defineCustomElement: ({ name, constructor, ignore }: IDefineCustomElement) => void;\n    pause: ({ milliseconds }: IPause) => Promise<unknown>;\n    getElement: <P extends GetElementParams>(params: P) => Promise<HTMLElement>;\n    getData: ({ jsonLd }: IGetData) => Promise<IJsonData>;\n    getEnvironment: () => Environment;\n    environment: Environment;\n    getMicrodataCaption: (params: IGetMicrodataCaption) => HTMLElement | null | undefined\n    messageQueue: Map<string, Set<IMessageQueueEntry>>;\n    worker?: Worker;\n    serviceWorker?: ServiceWorker;\n    serviceWorkerRegistration?: ServiceWorkerRegistration;\n    support?: ISupport;\n    workerSupport?: ISupport;\n    serviceWorkerSupport?: ISupport;\n    getJsonLdArray: ({ jsonLd }: IGetJsonLdArray) => Promise<string[][]>;\n    textMode?: boolean;\n    intersectionObserver?: IntersectionObserver;\n    messageChannel?: MessageChannel;\n    method: IVamtigerBrowserMethodLoadMethod;\n};\n\nexport interface IAttributes {\n    id?: string;\n    for?: string;\n    slot?: string;\n    'data-image-figure'?: string;\n    'data-json-ld'?: string;\n    itemprop?: string;\n}\n\nexport interface IGetServiceWorkerClients {\n    type: ClientTypes;\n}\n\nexport interface ISendMessageFromServiceWorker {\n    message: string | Uint8Array;\n    clients?: ServiceWorkerClient;\n}\n\nexport interface FetchEvent extends Event {\n\trequest: Request;\n\trespondWith(response: Promise<Response>|Response): Promise<Response>;\n}\n\nexport interface IUpdateRequestCache {\n    request: Request;\n}\n\nexport type ServiceWorkerClient = 'window' | 'worker' | 'sharedworker' | 'all';\n\nexport type JsonDataResolve = (data: IJsonData) => void;\n\nexport type WorkerPostMessage = (message: string | Uint8Array) => void;\n\nexport type IndexDbData = IWebComponentData | ISupport | ICustomElementName;\n\nexport type GetIndexedDbData<P extends IGetIndexedDbData> =\n    P['keyPath'] extends DbKeyPath.webComponent ? IWebComponentData | undefined :\n    P['keyPath'] extends DbKeyPath.support ? ISaveSupport :\n    P['keyPath'] extends DbKeyPath.customElementName ? ICustomElementName[] :\n    never;\n\nexport type DbKeyPathName = keyof typeof DbKeyPath;\n\nexport type DbStoreNameKey = keyof typeof DbStoreName;\n\nexport type AttributesKey = keyof IAttributes;\n\nexport type GetTemplate<P extends IGetTemplate> =\n    P['selector'] extends Selector.a ? HTMLAnchorElement :\n    P['selector'] extends  Selector.linkedDataCaptionElement ? HTMLSpanElement :\n    P['selector'] extends Selector.linkedDataCaption ? HTMLElement :\n    null;\n\ndeclare global {\n    interface Window extends TsLib {\n        VamtigerBrowserMethod: VamtigerBrowserMethod;\n        Babel: any;\n        EQCSS: IAnyObject;\n        requestIdleCallback?: typeof requestIdleCallback;\n        _: typeof lodash;\n        IntersectionObserver: typeof IntersectionObserver;\n        importScripts?: (url: string) => void;\n        'vamtiger-browser-method': HTMLMetaElement;\n    }\n\n    namespace NodeJS {\n        interface  Global {\n            VamtigerBrowserMethod: Window['VamtigerBrowserMethod'];\n        }\n    }\n}\n\nexport const regex = {\n    showRootHost: /:{1,2}host/gm,\n    dash: new RegExp(StringConstant.dash, 'g'),\n    space: /\\s/g,\n    nonWord: /\\W+/g,\n    backTicks: /`/gm,\n    remoteUrl: /^http(s)?/i,\n    jsJsonJs: /\\.js\\.json\\.js$/,\n    jsonJs: /\\.json\\.js$/,\n    trailingJs: /\\.js$/,\n    uppercase: /[A-Z]/,\n    leadingAt: /^@/,\n    email: /^email$/i,\n    trailingHtml: /\\.html$/i,\n    textModeElement: new RegExp(\n        (Object.keys(TextModeElementName) as (keyof typeof TextModeElementName)[])\n            .map(key => TextModeElementName[key])\n            .join(StringConstant.pipe),\n        'i'\n    )\n}\n\nexport const selector = {\n    redundantScripts: [\n        Selector.vamtigerBrowserMethodJsonJs,\n        Selector.vamtigerBrowserMethodJson,\n        Selector.vamtigerBrowserMethod,\n        Selector.transpiledJs,\n        ...(Object.keys(Dependency) as DependencyKey[]).map(key => `[src=\"${Dependency[key]}\"]`)\n    ].join(StringConstant.comma)\n}\n\nexport const sendMessageFromWorker = getPostMessage();\n\nexport const ignore = () => {};\n\nfunction getPostMessage() {\n    try {\n        return postMessage as WorkerPostMessage;\n    } catch(error) {}\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global global, define, System, Reflect, Promise */\r\nvar __extends;\r\nvar __assign;\r\nvar __rest;\r\nvar __decorate;\r\nvar __param;\r\nvar __metadata;\r\nvar __awaiter;\r\nvar __generator;\r\nvar __exportStar;\r\nvar __values;\r\nvar __read;\r\nvar __spread;\r\nvar __await;\r\nvar __asyncGenerator;\r\nvar __asyncDelegator;\r\nvar __asyncValues;\r\nvar __makeTemplateObject;\r\nvar __importStar;\r\nvar __importDefault;\r\n(function (factory) {\r\n    var root = typeof global === \"object\" ? global : typeof self === \"object\" ? self : typeof this === \"object\" ? this : {};\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"tslib\", [\"exports\"], function (exports) { factory(createExporter(root, createExporter(exports))); });\r\n    }\r\n    else if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        factory(createExporter(root, createExporter(module.exports)));\r\n    }\r\n    else {\r\n        factory(createExporter(root));\r\n    }\r\n    function createExporter(exports, previous) {\r\n        if (exports !== root) {\r\n            if (typeof Object.create === \"function\") {\r\n                Object.defineProperty(exports, \"__esModule\", { value: true });\r\n            }\r\n            else {\r\n                exports.__esModule = true;\r\n            }\r\n        }\r\n        return function (id, v) { return exports[id] = previous ? previous(id, v) : v; };\r\n    }\r\n})\r\n(function (exporter) {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\n    __extends = function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n\r\n    __assign = Object.assign || function (t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n\r\n    __rest = function (s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n                t[p[i]] = s[p[i]];\r\n        return t;\r\n    };\r\n\r\n    __decorate = function (decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    };\r\n\r\n    __param = function (paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    };\r\n\r\n    __metadata = function (metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    };\r\n\r\n    __awaiter = function (thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    };\r\n\r\n    __generator = function (thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    };\r\n\r\n    __exportStar = function (m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    };\r\n\r\n    __values = function (o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    };\r\n\r\n    __read = function (o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    };\r\n\r\n    __spread = function () {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    };\r\n\r\n    __await = function (v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    };\r\n\r\n    __asyncGenerator = function (thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    };\r\n\r\n    __asyncDelegator = function (o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    };\r\n\r\n    __asyncValues = function (o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    };\r\n\r\n    __makeTemplateObject = function (cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    __importStar = function (mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result[\"default\"] = mod;\r\n        return result;\r\n    };\r\n\r\n    __importDefault = function (mod) {\r\n        return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n    };\r\n\r\n    exporter(\"__extends\", __extends);\r\n    exporter(\"__assign\", __assign);\r\n    exporter(\"__rest\", __rest);\r\n    exporter(\"__decorate\", __decorate);\r\n    exporter(\"__param\", __param);\r\n    exporter(\"__metadata\", __metadata);\r\n    exporter(\"__awaiter\", __awaiter);\r\n    exporter(\"__generator\", __generator);\r\n    exporter(\"__exportStar\", __exportStar);\r\n    exporter(\"__values\", __values);\r\n    exporter(\"__read\", __read);\r\n    exporter(\"__spread\", __spread);\r\n    exporter(\"__await\", __await);\r\n    exporter(\"__asyncGenerator\", __asyncGenerator);\r\n    exporter(\"__asyncDelegator\", __asyncDelegator);\r\n    exporter(\"__asyncValues\", __asyncValues);\r\n    exporter(\"__makeTemplateObject\", __makeTemplateObject);\r\n    exporter(\"__importStar\", __importStar);\r\n    exporter(\"__importDefault\", __importDefault);\r\n});\r\n","import * as tslib from '../node_modules/tslib/tslib';\nimport { TsLibKey } from './types';\n\nconst tsLibKeys = Object.keys(tslib) as TsLibKey[];\n\ntsLibKeys.forEach(key => {\n    if (!self[key]) {\n        self[key] = tslib[key];\n    }\n});","import {\n    IGetMetaElement,\n    StringConstant,\n    Selector\n} from './types';\n\nconst { nothing } = StringConstant;\n\nexport default function ({ selector = nothing, properties = {}, dataset = {}, attributes = {}}: IGetMetaElement) {\n    const { id } = properties;\n    const { head } = document;\n    const lastMetaElement = head.querySelector<HTMLMetaElement>(Selector.lastMetaElement);\n    const attributeKeys = Object.keys(attributes);\n    const existingMetaElement = id && ((window as any)[id]\n        || selector && head.querySelector(selector)) as HTMLMetaElement;\n    const newMetaElment = !existingMetaElement && document.createElement('meta');\n    const metaElement = (existingMetaElement || newMetaElment) as HTMLMetaElement;\n\n    let dataKey: string;\n\n    if (newMetaElment) {\n        Object.assign(newMetaElment, properties);\n        Object.assign(newMetaElment.dataset, dataset);\n\n        if (lastMetaElement && lastMetaElement.nextElementSibling) {\n            head.insertBefore(\n                newMetaElment,\n                lastMetaElement.nextElementSibling\n            );\n        } else {\n            head.appendChild(newMetaElment);\n        }\n    }\n\n    attributeKeys.forEach(key => !metaElement.hasAttribute(key) && metaElement.setAttribute(dataKey, attributes[key]));\n\n    return metaElement;\n}","import {\n    ILoadElementQueryCss,\n    MetaElementName,\n    StringConstant,\n    regex\n} from './types';\nimport getMetaElment from './get-meta-element';\n\nconst { requestIdleCallback } = self;\nconst { showRootHost } = regex;\nconst { nothing } = StringConstant;\n\nexport default function(params: ILoadElementQueryCss) {return new Promise(async (resolve, reject) => {\n    if (requestIdleCallback) {\n        requestIdleCallback(() => loadElementQueryCss(params).then(resolve).catch(reject));\n    } else {\n        setTimeout(() => loadElementQueryCss(params).then(resolve).catch(reject), 0);\n    }\n})}\n\nasync function loadElementQueryCss({ css, stylesheetName: currentStylesheetName = nothing, hostName = nothing }: ILoadElementQueryCss) {\n    const { _ } = self;\n    const { camelCase } = _;\n    const metaElement = getMetaElment({\n        properties: {\n            id: MetaElementName.loadElementQueryCss\n        }\n    });\n    const stylesheetName = camelCase(currentStylesheetName);\n    const { dataset } = metaElement;\n    const elementQueryCss = !dataset.hasOwnProperty(hostName) && (hostName && css.replace(showRootHost, hostName)) || css;\n    const { EQCSS } = self;\n\n    if (elementQueryCss && EQCSS) {\n        EQCSS.register(EQCSS.parse(elementQueryCss));\n\n        if (stylesheetName) {\n            dataset[stylesheetName] = nothing;\n        } else if (hostName) {\n            dataset[hostName] = nothing;\n        }\n    }\n\n    return true;\n}","import {\n    Dependency\n} from './types';\n\nexport const babel = {\n    presets: ['es2015']\n};\n\nexport const jsonLdEntryValueType = new Set([\n    typeof 1,\n    typeof '',\n    typeof true\n]);\n\nexport const dependencyPaths = Array.from(new Set([\n    'lodash/lodash.min.js'\n]));\n\nexport const getDependencies = () => [\n    !self._ && Dependency.lodash || ''\n].filter(dependency => dependency);\n\nexport const intersectionObserverThreshold = getIntersectionObserverThreshold(5);\n\nexport const intersectionObserver = {\n    root: null,\n    rootMargin: '0px',\n    threshold: intersectionObserverThreshold\n};\n\nexport const serviceWorker = {\n    scope: '/'\n};\n\nexport const serviceWorkerClients = {\n    includeUncontrolled: true\n}\n\nfunction getIntersectionObserverThreshold(length: number) {\n    const step = 1 / length;\n    const threshold = Array(length)\n        .fill(undefined)\n        .map((value, index) => index ? (index + 1) * step : index);\n\n    return threshold;\n}\n\nexport const workerDependencies = [\n    Dependency.lodash\n]","import {\n    IGetBabelJs,\n    IAnyObject,\n    ScriptType,\n    ScriptAttribute,\n    StringConstant\n} from './types';\nimport { babel } from './config';\n\nconst { nothing } = StringConstant;\n\nexport default async function ({ url, js }: IGetBabelJs) {\n    const { fetch, Babel } = self;\n    const { transform } = Babel || { transform: undefined }\n    const code = transform && (js || url && await fetch(url)\n        .then(response => response && response.text())\n        .catch(handleError));\n    const { code: transpiledCode } = code && code.trim() && transform && transform(code, babel) || { code: '' };\n    const transpiledJs: string = transpiledCode || js;\n\n    return transpiledJs;\n}\n\nfunction handleError(error: Error) {\n    const transpiledJs = '';\n\n    console.warn(error.message);\n    console.warn(error.stack);\n\n    return transpiledJs;\n}","export default function () {\n    try {\n        return self instanceof Window;\n    } catch(error) {\n        return false;\n    }\n}","declare const DedicatedWorkerGlobalScope: any;\n\nexport default function () {\n    try {\n        return self instanceof DedicatedWorkerGlobalScope;\n    } catch(error) {\n        return false;\n    }\n}","declare const ServiceWorkerGlobalScope: any;\n\nexport default function () {\n    try {\n        return self instanceof ServiceWorkerGlobalScope;\n    } catch(error) {\n        return false;\n    }\n}","import {\n    IAnyObject,\n    IGetServiceWorkerClients\n} from './types';\nimport {\n    serviceWorkerClients as baseConfig\n} from './config';\nimport isServiceWorker from './is-service-worker';\n\ndeclare const self: IAnyObject;\n\nexport default async function (params: IGetServiceWorkerClients) {\n    const clients: IAnyObject[] = isServiceWorker() && await getClients(params) || [];\n\n    return clients;\n}\n\nfunction getClients({type}: IGetServiceWorkerClients) {\n    const config = {\n        ...baseConfig,\n        type\n    };\n    const clients = self && self.clients && self.clients.matchAll && self.clients.matchAll(config);\n\n    return clients;\n}","import {\n    ISendMessageFromServiceWorker\n} from './types';\nimport getServiceWorkerClients from './get-service-worker-clients';\n\nexport default async function ({clients: type = 'window', message}: ISendMessageFromServiceWorker) {\n    const clients = await getServiceWorkerClients({type});\n\n    Promise.all(clients.map((client) => client.postMessage(message)));\n}","import {\n    IMessageAction,\n    ISupport,\n    sendMessageFromWorker,\n    WorkerType\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport isServiceWorker from './is-service-worker';\nimport sendMessageFromServiceWorker from './send-message-from-service-worker';\n\nconst { stringify } = JSON;\nconst textEncoder = new TextEncoder();\n\nexport default function (params: IMessageAction) {\n    const { serviceWorker } = navigator;\n    const { workerType = WorkerType.worker } = params;\n    const { VamtigerBrowserMethod } = self;\n    const { worker, support } = VamtigerBrowserMethod;\n    const { textEncoder: textEncoderSupport } = support || {} as ISupport;\n    const stringMessage = stringify(params);\n    const message = textEncoderSupport && textEncoder.encode(stringMessage)\n        || stringMessage;\n\n    if (isWindow()) {\n        if(workerType === WorkerType.all) {\n            worker && worker.postMessage(message);\n            serviceWorker && serviceWorker.controller && serviceWorker.controller.postMessage(message);\n        } else if (workerType === WorkerType.worker) {\n            worker && worker.postMessage(message);\n        } else if (workerType === WorkerType.serviceWorker) {\n            serviceWorker && serviceWorker.controller && serviceWorker.controller.postMessage(message);\n        }\n    } else if (isWorker()) {\n        sendMessageFromWorker && sendMessageFromWorker(message);\n    } else if (isServiceWorker()) {\n        sendMessageFromServiceWorker({message});\n    }\n}","import {\n    IIsJsonScript\n} from './types';\n\nconst { parse } = JSON;\n\nexport default function ({ script }: IIsJsonScript) {\n    const { innerHTML } = script;\n\n    let isJson = false;\n\n    try {\n        parse(innerHTML);\n        isJson = true;\n    } catch(error) {\n        console.warn(error);\n        isJson = false;\n    }\n\n    return isJson;\n}","import {\n    MessageAction,\n    IRemoveRedundantScripts,\n    IRemoveRedundantScriptsRemoveScripts,\n    IRemoveRedundantScriptsRemoveScriptsFromParent,\n    StringConstant,\n    ScriptType,\n    Prefix\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport sendMessage from './send-message';\nimport isJsonScript from './is-json-script';\n\nconst { requestIdleCallback } = self;\nconst { dash } = StringConstant;\nconst { vamtigerBrowserMethod: prefix } = Prefix;\n\nexport default async function (params: IRemoveRedundantScripts) {\n    isWindow() && await removeRedundantScripts(params);\n\n    isWorker() && sendRemoveRedundantScriptsMessage(params);\n}\n\nasync function removeRedundantScripts(params: IRemoveRedundantScripts) {\n    const { head: parent } = document;\n\n    await removeScripts({...params, parent});\n}\n\nexport function removeScripts(params: IRemoveRedundantScriptsRemoveScripts) {return new Promise((resolve, reject) => {\n    if (requestIdleCallback) {\n        requestIdleCallback(() => removeScriptsFromParent({...params, resolve, reject }));\n    } else {\n        setTimeout(() => removeScriptsFromParent({...params, resolve, reject }), 0);\n    }\n})}\n\nexport function removeDuplicateScripts(params: IRemoveRedundantScriptsRemoveScripts) {return new Promise((resolve, reject) => {\n    if (requestIdleCallback) {\n        requestIdleCallback(() => removeDuplicateScriptsFromParent({...params, resolve, reject }));\n    } else {\n        setTimeout(() => removeDuplicateScriptsFromParent({...params, resolve, reject }), 0);\n    }\n})}\n\nfunction removeDuplicateScriptsFromParent({resolve, reject, selector, parent}: IRemoveRedundantScriptsRemoveScriptsFromParent) {\n    const duplicateScripts = Array.from(parent.querySelectorAll<HTMLScriptElement>(selector));\n\n    duplicateScripts.pop();\n\n    duplicateScripts.forEach(duplicateScript => parent.removeChild(duplicateScript));\n\n    resolve && resolve();\n}\n\nfunction removeScriptsFromParent({ selector, parent, resolve, reject }: IRemoveRedundantScriptsRemoveScriptsFromParent) {\n    const { head } = document;\n    const scripts = Array.from(parent.querySelectorAll<HTMLScriptElement>(selector));\n    const jsScripts = scripts.filter(({type, src}) => src || !type || type === ScriptType.js);\n    const jsonScripts = scripts\n        .filter(({ type }) => type === ScriptType.json)\n        .filter(script => isJsonScript({ script }));\n    const jsonLdScripts = scripts\n        .filter(({ type }) => type === ScriptType.jsonld)\n        .filter(script => isJsonScript({ script }));\n    const safeScripts = jsonLdScripts.concat(jsonScripts);\n    const time = new Date().getTime();\n    const jsonScriptName = jsonScripts.length && [\n        prefix,\n        ScriptType.json,\n        time\n    ].join(dash);\n    const jsonScriptSelector = jsonScriptName && `script[type=\"${ScriptType.json}\"][data-name=\"${jsonScriptName}\"]`;\n    const jsonLdScriptName = jsonLdScripts.length && [\n        prefix,\n        ScriptType.jsonld,\n        time\n    ].join(dash);\n    const jsonLdScriptSelector = jsonLdScriptName && `script[type=\"${ScriptType.jsonld}\"][data-name=\"${jsonLdScriptName}\"]`;\n\n    jsScripts.length && jsonScriptName && jsScripts.forEach(({ dataset }) => dataset.name = jsonScriptName || '');\n\n    jsonLdScripts.length && jsonLdScriptName && jsonLdScriptSelector && jsonLdScripts.forEach(({ dataset }) => dataset.name = jsonLdScriptName || '');\n\n    if (jsonScriptSelector && parent !== head) {\n        parent.dataset.json = jsonScriptSelector;\n    }\n\n    if (jsonLdScriptSelector && parent !== head) {\n        parent.dataset.jsonLd = jsonLdScriptSelector;\n    }\n\n    if (scripts.length) {\n        parent.dataset.removedScripts = (Number(parent.dataset.removedScripts || 0) + scripts.length).toString();\n    }\n\n    safeScripts.forEach(script => head.appendChild(script));\n\n    scripts.forEach(script => parent.removeChild(script));\n\n    resolve && resolve();\n}\n\nexport function sendRemoveRedundantScriptsMessage({ selector }: IRemoveRedundantScripts) {\n    const massage = {\n        action: MessageAction.removeRedundantScripts,\n        params: {\n            selector\n        }\n    };\n\n    sendMessage(massage);\n}","import {\n    ILoadScript,\n    ILoadScriptLoadJsJsonJs,\n    ErrorMessage,\n    LocalScriptParams,\n    LocalStylesheetScriptParams,\n    ILoadRemoteStylesheetScriptParams,\n    ILoadRemoteScriptParams,\n    ILoadJsonScriptParams,\n    LoadScriptElement,\n    LoadedScript,\n    LinkRel,\n    ScriptAttribute,\n    ScriptType,\n    StringConstant,\n    regex,\n    Selector\n} from './types';\nimport loadElementQueryCss from './load-element-query-css';\nimport getTranspiledJs from './get-transpiled-js';\nimport removeRedundantScripts from './remove-redundant-scripts';\n\nconst { parse } = JSON;\nconst { failedToLoadScript } = ErrorMessage;\nconst { stylesheet } = LinkRel;\nconst { script: scriptElement, link, style } = LoadScriptElement;\nconst { remoteUrl, jsJsonJs, jsonJs, trailingJs } = regex;\nconst { nothing, slash } = StringConstant;\n\nexport default function<P extends ILoadScript['params']>(params: P) {\n    return loadScript(params);\n}\n\nfunction loadScript<P extends ILoadScript['params']>(params: P) {return new Promise(async (resolve: (script: LoadedScript<P>) => void, reject: ILoadScript['reject']) => {\n    const { head, body } = document;\n    const {\n        js,\n        name: scriptName,\n        jsonld,\n        removeFromDom,\n        workerDependency = false\n    } = params as LocalScriptParams;\n    const { src } = params as ILoadRemoteScriptParams;\n    const transpiledJs = (js || src && !src.match(remoteUrl)) && await getTranspiledJs({ js, url: src}) || '';\n    const { css, name: stylesheetName } = params as LocalStylesheetScriptParams;\n    const { href } = params as ILoadRemoteStylesheetScriptParams;\n    const { json } = params as ILoadJsonScriptParams;\n    const remoteScript = params.hasOwnProperty('src') || params.hasOwnProperty('href');\n    const element = (js || json|| src) && scriptElement\n        || css && style\n        || href && link;\n    const selector = src && `script[src=\"${src}\"]`\n        || href && `link[href=\"${href}\"]`\n        || js && scriptName && `script[data-name=\"${scriptName}\"]`\n        || jsonld && scriptName && `script[data-name=\"${scriptName}\"][type=\"${ScriptType.jsonld}\"]`\n        || css && stylesheetName && `style[data-name=\"${stylesheetName}\"]`;\n    const existingScript = (head.querySelector(selector) || body.querySelector(selector)) as LoadedScript<P>;\n    const script = selector\n        && element\n        && document.createElement(element) as LoadedScript<P>;\n\n    if (script instanceof HTMLScriptElement) {\n        if (!transpiledJs && src) {\n            script.src = src;\n        } else if (json || transpiledJs || js) {\n            script.innerHTML = json || transpiledJs || js;\n            script.dataset.name = scriptName || src;\n\n            if (jsonld) {\n                script.setAttribute(ScriptAttribute.type, ScriptType.jsonld);\n\n                script.dataset.jsonLd = script.dataset.name;\n            } else if (json) {\n                script.setAttribute(ScriptAttribute.type, ScriptType.json);\n            } else if (transpiledJs) {\n                script.dataset.transpiledJs = nothing;\n            }\n        }\n    } else if (script instanceof HTMLLinkElement) {\n        script.rel = stylesheet;\n        script.href = href;\n    } else if (script instanceof HTMLStyleElement) {\n        script.innerHTML = css;\n        script.dataset.name = stylesheetName;\n\n        await loadElementQueryCss({\n            css,\n            stylesheetName\n        });\n    }\n\n    if (existingScript) {\n        resolve(existingScript);\n    } else if (script) {\n        script.addEventListener('load', handleLoad);\n        script.addEventListener('error', handleLoadError);\n\n        head.appendChild(script);\n\n        if (workerDependency) {\n            script.dataset.workerDependency = nothing;\n        }\n\n        if (transpiledJs || !remoteScript) {\n            handleLoad();\n        }\n    }\n\n    async function handleLoad() {\n        if (script) {\n            removeEventListeners();\n\n            if (removeFromDom) {\n                head.removeChild(script);\n            }\n\n            if(src && src.match(jsJsonJs)){\n                await loadJsJsonJs({ src, workerDependency });\n            }\n\n            resolve(script);\n        }\n    }\n\n    function handleLoadError(event: Event) {\n        removeEventListeners();\n\n        console.error(event);\n\n        reject(new Error(`${failedToLoadScript}`));\n    }\n\n    function removeEventListeners() {\n        if (script) {\n            script.removeEventListener('load', handleLoad);\n            script.removeEventListener('error', handleLoadError);\n        }\n    }\n})};\n\nasync function loadJsJsonJs({ src, workerDependency }: ILoadScriptLoadJsJsonJs) {\n    const { head } = document;\n    const paths = src\n        .replace(trailingJs, nothing)\n        .split(slash);\n    const scriptName = paths[paths.length - 1];\n    const selector = src && scriptName && `script[type=\"${ScriptType.json}\"][data-name=\"${scriptName}\"]`;\n    const jsJsonJsScript = selector && head.querySelector<HTMLScriptElement>(selector);\n    const json = jsJsonJsScript && jsJsonJsScript.innerHTML && parse(jsJsonJsScript.innerHTML);\n    const js: string = json && json.text;\n    const name = src.replace(jsonJs, nothing);\n    const removeScriptSelector = [\n        `script[src=\"${src}\"]`,\n        selector,\n        Selector.transpiledJs\n    ].join(StringConstant.comma);\n\n    if (name && js) {\n        await loadScript({ name, js, workerDependency }).catch(handleError);\n\n        await removeRedundantScripts({selector: removeScriptSelector});\n    }\n}\n\nfunction handleError(error: Error) {\n    console.warn(error.name);\n    console.warn(error.message);\n    console.warn(error.stack);\n}","import { LoadScriptsParams, LoadedScripts } from './types';\nimport loadScript from './load-script';\n\nexport default function <P extends LoadScriptsParams>(params: P) {\n    const scripts = Promise.all(params.map(loadScript)) as Promise<LoadedScripts<P>>;\n\n    return scripts\n}","import { LoadScriptsSequentiallyParams, LoadedScriptsSequentially, LoadScriptParams } from './types';\nimport loadScript from './load-script';\n\nexport default <P extends LoadScriptParams[][]>(params: P) => new Promise((resolve: (scripts: LoadedScriptsSequentially<P>) => void, reject) => {\n    let scripts = new Set();\n    let load = Promise.resolve();\n\n    params.forEach(scriptParams => {\n        load = load\n            .then(async () => await Promise.all(scriptParams.map(loadScript)))\n            .then(loadedScripts => loadedScripts.forEach(script => scripts.add(script)))\n    });\n\n    load = load.then(() => resolve(Array.from(scripts) as LoadedScriptsSequentially<P>));\n\n    return load;\n});","import {\n    ILoadShadowStylesheet,\n    Selector\n} from './types';\n\nexport default function ({ css, element }: ILoadShadowStylesheet) {\n    const {\n        shadowRoot,\n        localName: hostName\n    } = element;\n    const lastStylesheet = shadowRoot && shadowRoot.querySelector(Selector.lastStylesheet);\n    const stylesheet = shadowRoot && document.createElement('style');\n\n    if (stylesheet && shadowRoot) {\n        stylesheet.innerHTML = css;\n\n        if (lastStylesheet && lastStylesheet.nextElementSibling) {\n            shadowRoot.insertBefore(stylesheet, lastStylesheet.nextElementSibling);\n        } else {\n            shadowRoot.appendChild(stylesheet);\n        }\n    }\n}","import {\n    IGetDbParams,\n    IGetDbParamsHandleUpgradeNeeded,\n    IDbParams,\n    DbName,\n    DbStoreName,\n    DbStoreNameKey,\n    DbKeyPathName,\n    DbKeyPath\n} from './types';\n\nconst { vamtigerBrowserSupport: dbName } = DbName;\n\nexport default async function (params: IGetDbParams) {\n    const { storeName, keyPath, mode } = params;\n    const db = await getDb();\n    const transaction = db && db.transaction && db.transaction(storeName, mode);\n    const store = transaction && transaction.objectStore && transaction.objectStore(storeName);\n    const dbParams: IDbParams = {\n        db,\n        transaction,\n        store\n    };\n\n    return dbParams;\n}\n\nexport function getDb() {return new Promise((resolve: (db: IDBDatabase) => void, reject) => {\n    const dbRequest = indexedDB.open(dbName, 1);\n\n    dbRequest.addEventListener('error', reject);\n\n    dbRequest.addEventListener('upgradeneeded', () => handleUpgradeNeeded({ db: dbRequest.result }));\n\n    dbRequest.addEventListener('success', () => resolve(dbRequest.result));\n})}\n\nfunction handleUpgradeNeeded({ db }: IGetDbParamsHandleUpgradeNeeded) {\n    const storeNames = Object.keys(DbKeyPath);\n\n    storeNames.forEach(storeName => !db.objectStoreNames.contains(storeName) && db.createObjectStore(DbStoreName[storeName as DbStoreNameKey], {\n        keyPath: DbKeyPath[storeName as DbKeyPathName]\n    }));\n}","import {\n    ISaveIndexedDbData,\n    ISaveIndexedDbDataHandleSuccess,\n    DbMode,\n    MessageAction\n} from './types';\nimport getDbParams from './get-db-params';\nimport sendMessage from './send-message';\n\nconst { readwrite: mode } = DbMode;\n\nexport default async function ({ storeName, keyPath, data, messageId, successAction: action }: ISaveIndexedDbData) {\n    const { store } = await getDbParams({\n        storeName,\n        keyPath,\n        mode\n    });\n    const save = store.put(data);\n\n    save.addEventListener('error', handleError);\n    save.addEventListener('success', () => handleSuccess({ messageId, key: keyPath, action, data }));\n}\n\nfunction handleSuccess(params: ISaveIndexedDbDataHandleSuccess) {\n    const {\n        action,\n        data\n    } = params;\n    const message = action && {\n        action,\n        params: {\n            ...params,\n            ...data\n        }\n    };\n\n    message && sendMessage(message);\n}\n\nfunction handleError(error: Event) {\n    console.error(error);\n    throw error;\n}","import {\n    IGetIndexedDbData,\n    GetIndexedDbData,\n    DbMode\n} from './types';\nimport getDbParams from './get-db-params';\n\nconst { readonly: mode } = DbMode;\n\nexport default async function <P extends IGetIndexedDbData>({ storeName, keyPath, key }: P): Promise<GetIndexedDbData<P>> {return new Promise(async (resolve, reject) => {\n    const { store } = await getDbParams({\n        storeName,\n        keyPath,\n        mode\n    });\n    const get = key && store.get(key) || store.getAll();\n\n    get.addEventListener('error', reject);\n    get.addEventListener('success', () => resolve(get.result));\n})}","import {\n    ILoadScript,\n    LocalScriptParams,\n    LocalStylesheetScriptParams\n} from './types';\nimport loadScript from './load-script';\nimport isWindow from './is-window';\n\nexport default async function<P extends ILoadScript['params']>(params: P) {return new Promise((resolve, reject) => {\n    const { requestIdleCallback } = self;\n\n    if (requestIdleCallback) {\n        requestIdleCallback(() => isWindow() && loadScriptWindow(params).then(resolve).catch(reject));\n    } else {\n        setTimeout(() => isWindow() && loadScriptWindow(params).then(resolve).catch(reject), 0);\n    }\n})}\n\nasync function loadScriptWindow<P extends ILoadScript['params']>(params: P) {return new Promise(async (resolve, reject) => {\n    const { head } = document;\n    const { name, removeExisting } = params as LocalScriptParams;\n    const selector = name && removeExisting && `[data-name=\"${name}\"]`;\n    const existingScript = selector && head.querySelector<HTMLElement>(selector);\n    const ignore = existingScript && existingScript.innerHTML === ((params as LocalStylesheetScriptParams).css || (params as LocalScriptParams).js);\n\n    try {\n        !ignore && await loadScript(params);\n\n        resolve();\n    } catch(error) {\n        reject(error);\n    }\n});}","import {\n    MessageAction,\n    DbKeyPath,\n    DbStoreName,\n    Selector,\n    StringConstant,\n    ScriptName,\n    regex\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport sendMessage from './send-message';\nimport getData from './get-indexed-db-data';\nimport loadScript from './handle-load-script';\n\nconst { customElementName: keyPath } = DbKeyPath;\nconst { customElementName: storeName } = DbStoreName;\nconst { comma, semiColon, nothing } = StringConstant;\nconst { textModeElement } = regex;\n\nexport default function() {\n    isWindow() && getTextModeCssWindow();\n    isWorker() && getTextModeCssWorker();\n}\n\nfunction getTextModeCssWindow() {\n    const { VamtigerBrowserMethod } = self;\n    const { support, workerSupport, textMode } = VamtigerBrowserMethod;\n    const message = workerSupport && workerSupport.indexedDbIsAccessible && {\n        action: MessageAction.getTextModeCss,\n        params: {}\n    };\n\n    if (textMode && message) {\n        sendMessage(message);\n    } else if (textMode && support && support.indexedDbIsAccessible) {\n        getTextModeCssWindowIndexDb()\n    } else {\n        getTextModeCssFromMetaElement()\n    }\n}\n\nasync function getTextModeCssWindowIndexDb() {\n    const customElementNames = await getData({\n        storeName,\n        keyPath\n    }) || [];\n    const names = customElementNames.map(({ name }) => name);\n    const css = getCss(names);\n    const params = css && {\n        name: ScriptName.textMode,\n        css,\n        removeExisting: true\n    };\n\n    params && loadScript(params);\n}\n\nasync function getTextModeCssWorker() {\n    const customElementNames = await getData({\n        storeName,\n        keyPath\n    }) || [];\n    const names = customElementNames.map(({ name }) => name);\n    const css = getCss(names);\n    const message = css && {\n        action: MessageAction.loadScript,\n        params: {\n            name: ScriptName.textMode,\n            css,\n            removeExisting: true\n        }\n    };\n\n    message && sendMessage(message);\n}\n\nfunction getTextModeCssFromMetaElement() {\n    const { VamtigerBrowserMethod } = self;\n    const { metaElement } = VamtigerBrowserMethod;\n    const customElementMetaElement = metaElement && metaElement.querySelector<HTMLMetaElement>(Selector.customElementNameMetaElement);\n    const names = customElementMetaElement && (Array\n        .from(customElementMetaElement.children) as HTMLMetaElement[])\n        .map(({ dataset }) => dataset.name || '')\n        .filter(name => name)\n        || [];\n    const css = getCss(names);\n    const params = css && {\n        name: ScriptName.textMode,\n        css,\n        removeExisting: true\n    };\n\n    params && loadScript(params);\n}\n\nfunction getCss(names: string[]) {\n    const selector = names\n        .filter(name => !name.match(textModeElement))\n        .map(name => `${Selector.htmlTextMode} ${name}`)\n        .join(comma);\n    const cssBody = selector && [\n        'display: none'\n    ].join(semiColon);\n    const css = selector && cssBody && [\n        selector,\n        '{',\n        cssBody,\n        '}'\n    ].join(nothing);\n\n    return css;\n}","import {\n    ISaveCustomeElementName,\n    DbKeyPath,\n    DbStoreName,\n    MessageAction,\n    Selector\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport sendMessage from './send-message';\nimport save from './save-indexed-db-data';\nimport getTextModeCss from './get-text-mode-css';\n\nconst { customElementName: keyPath } = DbKeyPath;\nconst { customElementName: storeName } = DbStoreName;\n\nexport default function (params: ISaveCustomeElementName) {\n    isWindow() && saveCustomElementNameWindow(params);\n\n    isWorker() && saveCustomElementNameWorker(params)\n}\n\nfunction saveCustomElementNameWindow(params: ISaveCustomeElementName) {\n    const { VamtigerBrowserMethod } = self;\n    const { support, workerSupport } = VamtigerBrowserMethod;\n    const message = workerSupport && workerSupport.indexedDbIsAccessible && {\n        action: MessageAction.saveCustomElementName,\n        params\n    };\n\n    if (message) {\n        sendMessage(message);\n    } else if (support && support.indexedDbIsAccessible) {\n        saveCustomElementNameWindowIndexDb(params);\n    } else {\n        saveCustomeElementNameDocument(params);\n    }\n}\n\nfunction saveCustomElementNameWorker(params: ISaveCustomeElementName) {\n    saveCustomElementNameIndexDb(params);\n}\n\nfunction saveCustomElementNameIndexDb(params: ISaveCustomeElementName) {\n    const { name } = params;\n    const saveParams = name && {\n        storeName,\n        keyPath,\n        data: {\n            name,\n            ...params\n        },\n        successAction: MessageAction.getTextModeCss\n    };\n\n    saveParams && save(saveParams);\n}\n\nasync function saveCustomElementNameWindowIndexDb(params: ISaveCustomeElementName) {\n    const { name } = params;\n    const saveParams = name && {\n        storeName,\n        keyPath,\n        data: {\n            name,\n            ...params\n        }\n    };\n\n    saveParams && await save(saveParams);\n\n    getTextModeCss();\n}\n\nfunction saveCustomeElementNameDocument({name}: ISaveCustomeElementName) {\n    const { VamtigerBrowserMethod } = self;\n    const { metaElement } = VamtigerBrowserMethod;\n    const customElementMetaElement = metaElement && metaElement.querySelector<HTMLMetaElement>(Selector.customElementNameMetaElement);\n    const selector = customElementMetaElement && `meta[data-name=\"${name}\"]`;\n    const existingMetaElement = selector && customElementMetaElement && customElementMetaElement.querySelector<HTMLMetaElement>(selector);\n    const newMetaElement = !existingMetaElement && document.createElement('meta');\n\n    if (customElementMetaElement && newMetaElement) {\n        newMetaElement.dataset.name = name;\n\n        customElementMetaElement.appendChild(newMetaElement);\n\n        getTextModeCss();\n    }\n}","import {\n    IDefineCustomElement,\n    ErrorMessage,\n    ignore as doNothing\n} from './types';\nimport saveCustomElementName from './save-custom-element-name';\n\nconst { unsupportedFeature } = ErrorMessage;\n\nexport default function defineCustomElement({ name, constructor, ignore }: IDefineCustomElement) {\n    const { customElements } = self;\n    const define = customElements && customElements.define;\n    const existingElement = define && customElements.get && customElements.get(name);\n\n    if (define && !existingElement) {\n        customElements.define(name, constructor);\n        saveCustomElementName({name});\n    } else if (existingElement) {\n        doNothing();\n    } else if (!ignore) {\n        defineCustomElement({ name, constructor, ignore: true });\n    } else {\n        throw new Error(`${unsupportedFeature}: Custom Elements - ${name}`);\n    }\n}","import { IPause } from './types';\n\nexport default ({ milliseconds = 1000 }: IPause) => new Promise((resolve, reject) => setTimeout(resolve, milliseconds));","\nimport {\n    ILoadContainerStylesheets,\n    ScriptNameSuffix,\n    StringConstant,\n    Selector\n} from './types';\nimport loadScript from './load-script'\n\nconst { dash } = StringConstant;\n\nexport default function(params: ILoadContainerStylesheets) { return new Promise((resolve: (styleElements: HTMLStyleElement[]) => void, reject) => {\n    const { requestIdleCallback } = self;\n\n    if (requestIdleCallback) {\n        requestIdleCallback(() => loadStylesheets(params, resolve).catch(reject));\n    } else {\n        setTimeout(() => loadStylesheets(params, resolve).catch(reject), 0);\n    }\n})};\n\nasync function loadStylesheets(params: ILoadContainerStylesheets, resolve: (styleElements: HTMLStyleElement[]) => void) {\n    const { container, name } = params;\n    const styles = Array\n        .from(container.content.querySelectorAll<HTMLStyleElement>(Selector.style))\n        .map((style, index) => ({\n            name: [\n                name,\n                ScriptNameSuffix.style,\n                index++\n            ].join(dash),\n            css: style.innerHTML\n        }));\n    const stylesheets = Array\n        .from(container.content.querySelectorAll<HTMLLinkElement>(Selector.stylesheet))\n        .map((stylesheet, index) => ({\n            name: [\n                name,\n                ScriptNameSuffix.stylesheet,\n                index++\n            ].join(dash),\n            href: stylesheet.href\n        }));\n    const styleElements = await Promise.all([\n        ...styles.map(loadScript),\n        ...stylesheets.map(loadScript)\n    ]);\n\n    resolve(styleElements);\n}","import {\n    IGetElementTemplate,\n    TagName,\n    ErrorMessage\n} from './types';\nimport loadContainerStylesheets from './load-container-stylesheets';\n\nconst {\n    noElementName,\n    noTemplate,\n    noElementForSelector\n} = ErrorMessage;\n\nexport default async function (params: IGetElementTemplate) {\n    const { name, template, loadStylesheets, selector } = params;\n    const container = name && template && document.createElement(TagName.template);\n\n    let element: HTMLElement | null = null;\n\n    if (!name) {\n        throw new Error(noElementName);\n    } else if (!template) {\n        throw new Error(noTemplate);\n    }\n\n    if (container) {\n        container.innerHTML = template;\n\n        element = selector && container.content.firstElementChild && container.content.firstElementChild.querySelector(selector)\n            || container.content.firstElementChild as HTMLElement;\n\n        loadStylesheets && element && await loadContainerStylesheets({\n            ...params,\n            container\n        });\n    }\n\n    if (!element) {\n        throw new Error(noElementForSelector);\n    }\n\n    element.dataset.name = name;\n\n    return element;\n}","import {\n    IGetElementUrl,\n    TagName,\n    ErrorMessage\n} from './types';\nimport loadContainerStylesheets from './load-container-stylesheets';\n\nconst {\n    noElementName,\n    noElementSelector,\n    noTemplateUrl,\n    noTemplateForUrl,\n    noElementForSelector\n} = ErrorMessage;\n\nexport default async function (params: IGetElementUrl) {\n    const { name, url, selector, loadStylesheets } = params;\n    const { head } = document;\n    const template = name && selector && url && await fetch(url)\n        .then(response => response.text());\n    const container = template && document.createElement(TagName.template);\n\n    let element: HTMLElement | null = null;\n\n    if (!name) {\n        throw new Error(noElementName);\n    } else if (!selector) {\n        throw new Error(noElementSelector);\n    } else if (!url) {\n        throw new Error(noTemplateUrl);\n    } else if (!template) {\n        throw new Error(noTemplateForUrl);\n    }\n\n    if (container) {\n        container.innerHTML = template;\n\n        element = container.content.querySelector<HTMLElement>(selector);\n\n        loadStylesheets && element && await loadContainerStylesheets({\n            ...params,\n            container\n        });\n    }\n\n    if (!element) {\n        throw new Error(noElementForSelector);\n    }\n\n    element.setAttribute('dataset-name', name);\n\n    return element;\n}\n","import {\n    GetElementParams,\n    IGetElementTemplate,\n    IGetElementUrl,\n    Selector\n} from './types';\nimport getElementFromTemplate from './get-element-from-template';\nimport getElementFromUrl from './get-element-from-url';\nimport { removeScripts } from './remove-redundant-scripts';\n\nconst { script: selector } = Selector;\n\nexport default async function<P extends GetElementParams>(params: P) { return new Promise((resolve: (element: HTMLElement) => void, reject) => {\n    const { requestIdleCallback } = self;\n\n    if (requestIdleCallback) {\n        requestIdleCallback(() => getElement(params, resolve).catch(reject));\n    } else {\n        setTimeout(() => getElement(params, resolve).catch(reject), 0);\n    }\n})}\n\nexport async function getElement<P extends GetElementParams> (params: P, resolve: (element: HTMLElement) => void) {\n    let element: HTMLElement;\n\n    if ((params as IGetElementUrl).url) {\n        element = await getElementFromUrl(params as IGetElementUrl);\n    } else {\n        element = await getElementFromTemplate(params as IGetElementTemplate);\n    }\n\n    element && await removeScripts({ selector, parent: element });\n\n    resolve(element);\n}","import {\n    IQueue,\n    IMessageQueueEntry,\n    IQueueHandleExpiredQueueEntry,\n    TimeoutDuration\n} from './types';\n\nconst { webComponent: timeout } = TimeoutDuration;\n\nexport default function ({key, resolve, reject }: IQueue) {\n    const { VamtigerBrowserMethod } = self;\n    const queueEntry = {\n        resolve,\n        reject\n    };\n    const { messageQueue } = VamtigerBrowserMethod;\n\n    let queue: Set<IMessageQueueEntry> | undefined;\n\n    !messageQueue.has(key) && messageQueue.set(key, new Set());\n\n    queue = messageQueue.get(key);\n\n    queue && queue.add(queueEntry);\n\n    setTimeout(() => handleExpiredQueueEntry({ key, queueEntry }), timeout)\n}\n\nfunction handleExpiredQueueEntry({ key, queueEntry }: IQueueHandleExpiredQueueEntry) {\n    const { VamtigerBrowserMethod } = self;\n    const { messageQueue } = VamtigerBrowserMethod;\n    const queue = messageQueue.get(key);\n\n    if (queue) {\n        queue.has(queueEntry) && queue.delete(queueEntry);\n\n        !queue.size && messageQueue.delete(key);\n    }\n}\n","import {\n    IDequeue\n} from './types';\n\nexport default function ({ key, data }: IDequeue) {\n    const { VamtigerBrowserMethod } = self;\n    const { messageQueue } = VamtigerBrowserMethod;\n    const queue = messageQueue.get(key) || new Set();\n\n    Array.from(queue).forEach((queueEntry) => {\n        queueEntry.resolve(data);\n\n        queue.delete(queueEntry);\n    });\n}","import {\n    IGetWebComponentData,\n    MessageAction,\n    DbKeyPath,\n    DbStoreName,\n    ScriptType\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport sendMessage from './send-message';\nimport getData from './get-indexed-db-data';\nimport dequeue from './dequeue';\n\nconst { getWebComponentData: action } = MessageAction;\nconst { parse } = JSON;\n\nexport default function (params: IGetWebComponentData) {\n    const { VamtigerBrowserMethod } = self;\n    const { support, workerSupport, worker } = VamtigerBrowserMethod;\n\n    if (isWindow()) {\n        if (worker && workerSupport && workerSupport.indexedDbIsAccessible) {\n            return getWebComponentDataWindowWorker(params);\n        } else if (worker && support && support.indexedDbIsAccessible) {\n            getWebComponentDataWindow(params);\n        } else {\n            getWebComponentDataHead(params);\n        }\n    } else if (isWorker()) {\n        return getWebComponentDataWorker(params);\n    }\n}\n\nexport async function getWebComponentDataWindow({ key }: IGetWebComponentData) {\n    const data = await getWebComponentData({ key });\n    const dequeueParams = data && {\n        key,\n        data\n    };\n\n    if (dequeueParams) {\n        dequeue(dequeueParams);\n    }\n}\n\nasync function getWebComponentDataWindowWorker({ key }: IGetWebComponentData) {\n    const message = {\n        action,\n        params: {\n            key\n        }\n    };\n\n    sendMessage(message);\n}\n\nexport async function getWebComponentDataWorker({ key }: IGetWebComponentData) {\n    const webComponent = await getWebComponentData({ key });\n    const message = webComponent && webComponent.jsonLd && webComponent.jsonLd.length && {\n        action: MessageAction.dequeue,\n        params: {\n            key,\n            data: {\n                jsonLd: webComponent.jsonLd,\n                json: webComponent.json\n            }\n        }\n    };\n\n    return message;\n}\n\nexport async function getWebComponentData({ key }: IGetWebComponentData) {\n    const webComponentData = await getData({\n        storeName: DbStoreName.webComponent,\n        keyPath: DbKeyPath.webComponent,\n        key\n    });\n\n    return webComponentData;\n}\n\nfunction getWebComponentDataHead({ key }: IGetWebComponentData) {\n    const { head } = document;\n    const jsonLdSelector = `script[data-json-ld=\"${key}\"][type=\"${ScriptType.jsonld}\"]`;\n    const jsonSelector = `script[data-json-ld=\"${key}\"][type=\"${ScriptType.json}\"]`;\n    const jsonLdScripts = Array.from(head.querySelectorAll<HTMLScriptElement>(jsonLdSelector));\n    const jsonScript = head.querySelector<HTMLScriptElement>(jsonSelector);\n    const data = jsonLdScripts.length && {\n        jsonLd: jsonLdScripts.map(({innerHTML}) => innerHTML && parse(innerHTML)),\n        json: jsonScript && jsonScript.innerHTML && parse(jsonScript.innerHTML) || {}\n    };\n    const dequeueParams = data && {\n        key,\n        data\n    };\n\n    dequeueParams && dequeue(dequeueParams);\n}","import {\n    ISaveWebComponentData,\n    ISaveWebComponentDataWorker,\n    MessageAction,\n    DbStoreName,\n    DbKeyPath\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport save from './save-indexed-db-data';\nimport sendMessage from './send-message';\nimport getWebComponentData from './get-web-component-data';\nimport removeRedundantScripts from './remove-redundant-scripts';\n\nconst { webComponent: storeName } = DbStoreName;\nconst { webComponent: keyPath } = DbKeyPath;\n\nexport default function (params: ISaveWebComponentData) {\n    if (isWindow()) {\n        return saveWebComponentDataWindow(params);\n    } else if (isWorker()) {\n        return saveWebComponentDataWorker(params);\n    }\n}\n\nasync function saveWebComponentDataWindow(params: ISaveWebComponentData) {\n    const { VamtigerBrowserMethod } = self;\n    const { support, workerSupport } = VamtigerBrowserMethod;\n    const { url: key } = params;\n    const selector = getSelector({ url: key });\n    const data = getData(params);\n    const message = data && {\n        action: MessageAction.saveWebComponentData,\n        params: data\n    };\n\n    if (workerSupport && workerSupport.indexedDbIsAccessible) {\n        message && sendMessage(message);\n    } else if (support && support.indexedDbIsAccessible) {\n        await saveWebComponentDataIndexDb(params);\n        await getWebComponentData({ key });\n        await removeRedundantScripts({ selector });\n    }\n}\n\nasync function saveWebComponentDataWorker(params: ISaveWebComponentDataWorker) {\n    const { url } = params;\n    const selector = getSelector({ url });\n    const saveData = await saveWebComponentDataIndexDb(params);\n    const getWebComponentDataMessage = {\n        action: MessageAction.getWebComponentData,\n        params: {\n            key: url\n        }\n    };\n    const removeRedundantScriptsMessage = {\n        action: MessageAction.removeRedundantScripts,\n        params: {\n            selector\n        }\n    };\n\n    sendMessage(getWebComponentDataMessage);\n    sendMessage(removeRedundantScriptsMessage);\n}\n\nasync function saveWebComponentDataIndexDb(params: ISaveWebComponentData) {\n    const data = getData(params);\n    const saveParams = data && {\n        storeName,\n        keyPath,\n        data,\n        successAction: MessageAction.getWebComponentData\n    };\n\n    saveParams && await save(saveParams);\n}\n\nfunction getData({ url, created = new Date().getTime(), json, jsonLd }: ISaveWebComponentData) {\n    const data = url && jsonLd && {\n        url,\n        created,\n        jsonLd: jsonLd,\n        json: json\n    };\n\n    return data;\n}\n\nfunction getSelector({ url }: Pick<ISaveWebComponentData, 'url'>) {\n    const selector = `script[type=\"application/json\"][data-json-ld=\"${url}\"]`;\n\n    return selector;\n}","import {\n    ILoadData,\n    IJsonData,\n    ILoadDataGetJsonJsonLd,\n    Selector,\n    ILoadDataGetFeldData,\n    ScriptType\n} from './types';\nimport loadScript from './load-script';\nimport saveWebComponentData from './save-web-component-data';\nimport isWindow from './is-window';\nimport getJsonLd from './get-json-ld';\nimport removeRedundantScripts from './remove-redundant-scripts';\n\nconst { parse, stringify } = JSON;\nconst emptyJsonLd = {\n    jsonLd: [],\n    json: {}\n};\n\nexport default async function (params: ILoadData) {\n    return await (isWindow() && loadWebComponentData(params));\n}\n\nasync function loadWebComponentData({ url, loadJsonJsonLd }: ILoadData) {\n    const { VamtigerBrowserMethod } = self;\n    const { worker } = VamtigerBrowserMethod;\n    const { head } = document;\n    const jsonLdSelector = `script[type=\"application/ld+json\"][data-json-ld=\"${url}\"]`;\n    const { jsonLd, json } = await getWebComponentData({ url });\n    const jsonJsonLdData = loadJsonJsonLd && json && Array.isArray(json.jsonLd) && await Promise.all((json.jsonLd as ILoadDataGetJsonJsonLd[]).map(getJsonJsonLd));\n    const params = jsonLd && {\n        url,\n        created: new Date().getTime(),\n        jsonLd,\n        json\n    };\n    const jsonLdScript = head.querySelector<HTMLScriptElement>(jsonLdSelector);\n    const removeScriptParams = {\n        selector: `[type=\"${ScriptType.json}\"][data-name=\"${url}\"]`\n    }\n\n    if (jsonJsonLdData) {\n        jsonJsonLdData.forEach(currentJsonJsonLdData => currentJsonJsonLdData.forEach(({index, key, jsonLd: data}) => {\n            if (jsonLd && Array.isArray(jsonLd) && jsonLd[index] && key && jsonLd[index][key] === true && data) {\n                jsonLd[index][key] = data;\n            }\n        }));\n\n        if (jsonLdScript && jsonLd) {\n            head.removeChild(jsonLdScript);\n\n            await Promise.all(jsonLd.map(currentJsonLd => loadScript({\n                name: url,\n                json: stringify(currentJsonLd),\n                jsonld: true\n            })));\n\n            await removeRedundantScripts(removeScriptParams);\n        }\n    }\n\n    if (worker && params) {\n        saveWebComponentData(params);\n    }\n}\n\nasync function getJsonJsonLd({ index, fields }: ILoadDataGetJsonJsonLd) {\n    const keys = Object.keys(fields);\n    const jsonJsonLd = await Promise.all(keys.map(key => getFieldData({key, urls: fields[key]}).then(fieldData => ({index, ...fieldData}))));\n\n    return jsonJsonLd;\n}\n\nasync function getFieldData({ urls: currentUrls, key }: ILoadDataGetFeldData) {\n    const loadJsonJsonLd = false;\n    const urls = Array.isArray(currentUrls) && currentUrls.filter(url => typeof url === 'string') || [];\n    const fieldData = await Promise.all(urls.map(url => getJsonLd({ jsonLd: url, loadJsonJsonLd })));\n    const data = {\n        key,\n        jsonLd: [] as IJsonData['jsonLd']\n    };\n\n    fieldData.forEach(({jsonLd}) => jsonLd && jsonLd.forEach(currentJsonLd => currentJsonLd && data.jsonLd.push(currentJsonLd)));\n\n    return data;\n}\n\nasync function getWebComponentData({ url }: ILoadData) {\n    try {\n        const { head } = document;\n        const selector = `${Selector.script}[src=\"${url}\"]`;\n        const jsonLdSelector = `script[type=\"application/ld+json\"][data-json-ld=\"${url}\"]`;\n        const jsonSelector = `script[type=\"application/json\"][data-json-ld=\"${url}\"]`;\n        const existingScript = head.querySelector(selector);\n        const script = !existingScript && await loadScript({ src: url });\n        const scripts = script && await Promise.all([\n            Array\n                .from(head.querySelectorAll<HTMLScriptElement>(jsonLdSelector))\n                .map(({ innerHTML }) => innerHTML),\n            head.querySelector<HTMLScriptElement>(jsonSelector)\n        ]);\n        const [ jsonLdScripts, jsonScript ] = scripts || [undefined, undefined];\n        const jsonLd = jsonLdScripts && jsonLdScripts.map(jsonLdScript => parse(jsonLdScript));\n        const json = jsonScript && parse(jsonScript.innerHTML) || {};\n        const webComponentData = {\n            jsonLd,\n            json\n        };\n\n        return webComponentData;\n    } catch(error) {\n        console.error(error);\n\n        return emptyJsonLd;\n    }\n}","import {\n    IGetJsonLd,\n    WebComponentDataResolve,\n    ErrorResolve\n} from './types';\nimport queue from './queue';\nimport loadWebComponentData from './load-web-component-data';\nimport getWebComponentData from './get-web-component-data';\n\nexport default function ({ jsonLd: url, loadJsonJsonLd = true }: IGetJsonLd) {return new Promise(async (resolve: WebComponentDataResolve, reject: ErrorResolve) => {\n    const queueParams = {\n        key: url,\n        resolve,\n        reject\n    };\n\n    queue(queueParams);\n\n    try {\n        await loadWebComponentData({ url, loadJsonJsonLd });\n    } catch(error) {\n        console.error(error);\n    }\n\n    getWebComponentData({ key: url });\n})}","export default function () {\n    const { documentElement } = document;\n    const isTextMode = documentElement.dataset.hasOwnProperty('vamtigerTextMode');\n\n    return isTextMode;\n}","import {\n    IViewJsonLd,\n    Dependency\n} from './types';\nimport loadScript from './load-script';\nimport isTextMode from './is-text-mode';\n\nconst { jsonLdViewer: src } = Dependency;\n\nlet jsonLdViewerElement: HTMLElement;\n\nexport default async function (params: IViewJsonLd) {\n    const textMode = isTextMode();\n\n    if (textMode) {\n        await viewJsonLd(params);\n    }\n}\n\nasync function viewJsonLd({jsonLd}: IViewJsonLd) {\n    const jsonLdViewerScript = await loadScript({name: src, src});\n    const jsonLdViewer = getJsonLdViewer();\n    const { dataset } = jsonLdViewer;\n\n    dataset.jsonLd = jsonLd;\n}\n\nfunction getJsonLdViewer() {\n    const { body } = document;\n    const jsonLdViewer = jsonLdViewerElement || document.createElement('vamtiger-json-ld-viewer');\n\n    if (!jsonLdViewerElement) {\n        jsonLdViewerElement = jsonLdViewer;\n\n        body.appendChild(jsonLdViewer);\n    }\n\n    return jsonLdViewer;\n}","import {\n    IGetData,\n    ErrorMessage,\n    IJsonData\n} from './types';\nimport getJsonLd from './get-json-ld';\nimport viewJsonLd from './view-json-ld';\n\nconst { noJsonLdParameter } = ErrorMessage;\n\nexport default function(params: IGetData) { return new Promise(async (resolve: (data: IJsonData) => void, reject) => {\n    const { requestIdleCallback } = self;\n    const { textMode, jsonLd } = params;\n\n    if (jsonLd) {\n        if (textMode) {\n            await viewJsonLd(params);\n        }\n\n        if (requestIdleCallback) {\n            requestIdleCallback(() => getJsonLd(params).then(resolve).catch(reject));\n        } else {\n            setTimeout(() => getJsonLd(params).then(resolve).catch(reject), 0);\n        }\n    } else {\n        reject(new Error(noJsonLdParameter));\n    }\n})}","import {\n    Environment\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport isServiceWorker from './is-service-worker';\n\nexport default function () {\n    const environment = isWorker() && Environment.worker\n        || isServiceWorker() && Environment.serviceWorker\n        || isWindow() && Environment.window\n        || Environment.unknown;\n\n    return environment;\n}","import {\n    IMessageAction,\n    MessageAction\n} from './types';\n\nconst { parse } = JSON;\nconst ignoreMessage = {\n    action: MessageAction.ignore,\n    params: {}\n}\nconst textDecoder = new TextDecoder();\n\nexport default function (event: MessageEvent) {\n    let message: IMessageAction;\n\n    try {\n        message = getMessageData(event) || ignoreMessage;\n    } catch(error) {\n        message = ignoreMessage;\n    }\n\n    return message;\n}\n\nfunction getMessageData({ data: message, ports }: MessageEvent) {\n    const messageData: IMessageAction = typeof message === 'string' && parse(message)\n        || message instanceof Uint8Array && parse(textDecoder.decode(message));\n\n    if (typeof messageData.params === 'string') {\n        messageData.params = {...parse(messageData.params), ports};\n    }\n\n    return messageData;\n}","import {\n    ISaveSupport,\n    MessageAction,\n    DbStoreName,\n    DbKeyPath,\n    Environment\n} from './types';\nimport save from './save-indexed-db-data';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport isServiceWorker from './is-service-worker';\nimport sendMessage from './send-message';\n\nconst { support: storeName } = DbStoreName;\n\nexport default async function (params: ISaveSupport) {\n    isWindow() && saveSupportDataWindow(params);\n\n    (isWorker() || isServiceWorker()) && saveSupportDataWorker(params);\n}\n\nfunction saveSupportDataWindow(params: ISaveSupport) {\n    const { VamtigerBrowserMethod } = self;\n    const { environment, ...support } = params;\n    const { workerSupport } = VamtigerBrowserMethod;\n    const message = workerSupport && workerSupport.indexedDbIsAccessible && {\n        action: MessageAction.saveSupport,\n        params\n    };\n\n    if (environment === Environment.serviceWorker) {\n        VamtigerBrowserMethod.serviceWorkerSupport = support;\n    } else if (environment === Environment.worker) {\n        VamtigerBrowserMethod.workerSupport = support;\n    }\n\n    if (message) {\n        sendMessage(message);\n    } else {\n        saveSupportDataIndexDb(params);\n    }\n}\n\nfunction saveSupportDataWorker(params: ISaveSupport) {\n    saveSupportDataIndexDb(params);\n}\n\nfunction saveSupportDataIndexDb(params: ISaveSupport) {\n    const { environment } = params;\n    const saveParams = environment && {\n        storeName,\n        keyPath: DbKeyPath.support,\n        data: {\n            environment,\n            ...params\n        }\n    };\n\n    saveParams && save(saveParams);\n}","import {\n    CacheName\n} from './types';\n\nconst { vamtigerBrowserMethod: cacheName } = CacheName;\n\nexport default async function () {\n    const { caches } = self;\n    const cache = caches && await caches.open(cacheName).catch(handleError) || undefined;\n\n    return cache;\n}\n\nfunction handleError(error: Error) {\n    console.warn(error.message);\n}","import {\n    ISupport,\n    MessageAction,\n    DbStoreName,\n    DbKeyPath,\n    TimeoutDuration,\n    Environment\n} from './types';\nimport isWorker from './is-worker';\nimport sendMessage from './send-message';\nimport getData from './get-indexed-db-data';\nimport saveSupport from './save-support';\nimport getCache from './get-cache';\n\nconst { support: keyPath } = DbKeyPath;\nconst { support: storeName } = DbStoreName\n\nexport default async function () {\n    const {\n        VamtigerBrowserMethod,\n        localStorage,\n        indexedDB,\n    } = self;\n    const [indexedDbIsAccessible, cache] = await Promise.all([\n        indexDbAccessible(),\n        getCache()\n    ]);\n    const support: ISupport = {\n        cache: Boolean(cache),\n        localStorage: Boolean(localStorage),\n        indexedDb: Boolean(indexedDB),\n        indexedDbIsAccessible,\n        worker: self.hasOwnProperty('Worker'),\n        sharedWorker: self.hasOwnProperty('SharedWorker'),\n        textEncoder: self.hasOwnProperty('TextEncoder'),\n        textDecoder: self.hasOwnProperty('TextDecoder')\n    };\n\n    VamtigerBrowserMethod.support = support;\n\n    isWorker() && sendWorkerSupport();\n}\n\nexport function indexDbAccessible() {return new Promise(async (resolve: (indexDbAccessible: boolean) => void, reject) => {\n    let indexedDbIsAccessible = false;\n    let resolved = false;\n    const environment = Environment.worker;\n    const timeout = setTimeout(() => !resolved && resolve(indexedDbIsAccessible), TimeoutDuration.indexDbIsAccessible);\n\n    await getData({\n        storeName,\n        keyPath,\n        key: environment\n    });\n\n    indexedDbIsAccessible = true;\n    resolved = true;\n\n    resolve(indexedDbIsAccessible);\n})}\n\nexport async function setWorkerSupport(workerSupport: ISupport) {\n    const { VamtigerBrowserMethod } = self;\n    const { support, environment } = VamtigerBrowserMethod;\n\n    VamtigerBrowserMethod.workerSupport = workerSupport;\n\n    support && saveSupport({\n        environment,\n        ...support\n    });\n\n    workerSupport && saveSupport({\n        environment: Environment.worker,\n        ...workerSupport\n    });\n}\n\nfunction sendWorkerSupport() {\n    const { VamtigerBrowserMethod } = self;\n    const message = {\n        action: MessageAction.setWorkerSupport,\n        params: VamtigerBrowserMethod.support || {}\n    };\n\n    sendMessage(message);\n}","const logMessage = 'Message Ignored';\n\nexport default function (params: any) {\n    console.log(logMessage);\n    console.warn(params);\n}","import {\n    ILoadMethod,\n    ILoadMethodWindow,\n    MessageAction,\n    ErrorMessage,\n    ScriptType,\n    StringConstant\n} from './types';\nimport loadScript from './load-script';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport sendMessage from './send-message';\nimport queue from './queue';\nimport getCache from './get-cache';\n\nconst { requestIdleCallback } = self;\nconst { nothing, slash } = StringConstant;\nconst blobParams = {\n    type: ScriptType.js\n}\n\nexport default async function (params: ILoadMethod) {return new Promise((resolve, reject) => {\n    if (isWindow()) {\n        if (requestIdleCallback) {\n            requestIdleCallback(() => loadMethodWindow({...params, resolve, reject}))\n        } else {\n            setTimeout(() => loadMethodWindow({...params, resolve, reject}), 0);\n        }\n    } else if (isWorker()) {\n        loadMethodWorker(params)\n            .then(resolve)\n            .catch(reject);\n    }\n})}\n\nasync function loadMethodWindow({relativeUrl, name, resolve, reject}: ILoadMethodWindow) {\n    let scriptLoadError: Error | undefined = undefined;\n\n    const { origin } = location;\n    const src = [\n        origin,\n        relativeUrl\n    ].join(slash);\n    const { VamtigerBrowserMethod, _ } = self;\n    const { worker, workerSupport } = VamtigerBrowserMethod;\n    const { get } = _;\n    const script = await loadScript({src}).catch(error => scriptLoadError = error);\n    const method: Function | undefined = get(VamtigerBrowserMethod.method, name);\n    const message = workerSupport && workerSupport.cache && worker && typeof method === 'function' && {\n        action: MessageAction.loadMethod,\n        params: {relativeUrl: src, name}\n    };\n    const queueParams = message && {\n        key: src,\n        resolve,\n        reject\n    };\n\n    if (script) {\n        script.dataset.vamtigerBrowserMethodLoadedMethod = name;\n    }\n\n    if (scriptLoadError) {\n        reject(scriptLoadError);\n    } else if (!method) {\n        reject(new Error(`${ErrorMessage.scriptLoadedButMethodNameNotFound} - ${name}`));\n    } else if (queueParams && message) {\n        queue(queueParams);\n\n        sendMessage(message);\n    } else {\n        resolve();\n    }\n}\n\nasync function loadMethodWorker({relativeUrl: url, name}: ILoadMethod) {\n    const { importScripts } = self;\n    const importMethod = url && importScripts && importScripts(url);\n    const message = {\n        action: MessageAction.dequeue,\n        params: {\n            key: url,\n            data: {}\n        }\n    };\n    const updateMethodMessage = method.hasOwnProperty(name) && {\n        action: MessageAction.updateMethod,\n        params: {name}\n    };\n\n    updateMethodMessage && sendMessage(updateMethodMessage);\n\n    return message;\n}\n","import {\n    Prefix\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport isServiceWorker from './is-service-worker';\n\nexport default function () {\n    const prefix = isWindow() && Prefix.messageIdWindow\n        || isWorker() && Prefix.messageIdWorker\n        || isServiceWorker() && Prefix.messageIdServiceWorker\n        || Prefix.messageIdUnknownEnvironment;\n    const time = new Date().getTime();\n    const messageId = prefix && `${prefix}-${time}`;\n\n    return messageId;\n}","import {\n    IGetMethodResult,\n    IGetMethodResultWindow,\n    MessageAction\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport queue from './queue';\nimport sendMessage from './send-message';\nimport getMessageId from './get-message-id';\n\nconst { requestIdleCallback } = self;\n\nexport default function (params: IGetMethodResult) {return new Promise((resolve, reject) => {\n    if (isWindow()) {\n        if (requestIdleCallback) {\n            requestIdleCallback(() => getMethodResultWindow({...params, resolve, reject}));\n        } else {\n            setTimeout(() => getMethodResultWindow({...params, resolve, reject}), 0);\n        }\n    } else if (isWorker()) {\n        getMethodResultWorker(params)\n            .then(resolve)\n            .then(reject);\n    }\n})}\n\nasync function getMethodResultWindow({messageId = getMessageId(), name, params, resolve, reject}: IGetMethodResultWindow) {\n    const queueParams = {\n        key: messageId,\n        resolve,\n        reject\n    };\n    const message = {\n        action: MessageAction.getMethodResult,\n        params: {\n            name,\n            params,\n            messageId\n        }\n    };\n\n    queue(queueParams);\n\n    sendMessage(message);\n}\n\nasync function getMethodResultWorker({messageId: key = '', name, params}: IGetMethodResult) {\n    const { VamtigerBrowserMethod } = self;\n    const { method } = VamtigerBrowserMethod;\n    const namedMethod = method[name];\n    const result = namedMethod ? await namedMethod(params) : `No method named '${name}'`;\n    const message = {\n        action: MessageAction.dequeue,\n        params: {\n            key,\n            data: result\n        }\n    };\n\n    return message;\n}","import {\n    IUpdateMthod,\n    IAnyObject\n} from './types';\nimport isWindow from './is-window';\nimport getMethodResult from './get-method-result';\n\nconst { requestIdleCallback } = self;\n\nexport default function (params: IUpdateMthod) {\n    if (isWindow()) {\n        if (requestIdleCallback) {\n            requestIdleCallback(() => updateMethodWindow(params));\n        } else {\n            setTimeout(() => updateMethodWindow(params), 0)\n        }\n    }\n}\n\nasync function updateMethodWindow({name}: IUpdateMthod) {\n    const { VamtigerBrowserMethod } = self;\n    const { method } = VamtigerBrowserMethod;\n    const nameMethod = method[name];\n\n    if (nameMethod) {\n        method[name] = (params: IAnyObject) => getMethodResult({name, params});\n    }\n}","import {\n    IImportDependencies,\n    Selector,\n    MessageAction,\n    WorkerType\n} from './types';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport isServiceWorker from './is-service-worker';\nimport sendMessge from './send-message';\n\nconst { requestIdleCallback } = self;\n\nexport default function (params: IImportDependencies) {\n    if (isWindow() && requestIdleCallback) {\n        if (requestIdleCallback) {\n            requestIdleCallback(importDependenciesWindow);\n        } else {\n            setTimeout(importDependenciesWindow, 0);\n        }\n    } else if (isWorker()) {\n        importDependenciesWorker(params);\n    }\n}\n\nfunction importDependenciesWindow() {\n    const {'vamtiger-browser-method': metaElement } = self;\n    const dependencyUrlMetaElement = metaElement.querySelector<HTMLMetaElement>(Selector.dependencyUrlMetaElement);\n    const urlMetaElements = dependencyUrlMetaElement && Array.from(dependencyUrlMetaElement.querySelectorAll<HTMLMetaElement>(Selector.urlMetaElement)) || [];\n    const urls = urlMetaElements\n        .map(({dataset}) => dataset.url || '')\n        .filter(url => url);\n    const message = {\n        action: MessageAction.importDependencies,\n        params: {urls},\n        workerType: WorkerType.all\n    };\n\n    sendMessge(message);\n}\n\nfunction importDependenciesWorker({urls = []}: IImportDependencies) {\n    const { importScripts } = self;\n    const action = MessageAction.removeDependencyUrl;\n\n    importScripts && urls.forEach(url => {\n        importScripts(url);\n\n        sendMessge({action, params: {url}});\n    });\n}","import {\n    IRemoveDepencyUrl,\n    Selector\n} from './types';\nimport isWindow from './is-window';\n\nconst { requestIdleCallback } = self;\n\nexport default function (params: IRemoveDepencyUrl) {\n    if (isWindow()) {\n        if (requestIdleCallback) {\n            requestIdleCallback(() => removeDependencyUrlWindow(params));\n        } else {\n            setTimeout(() => removeDependencyUrlWindow(params), 0);\n        }\n    }\n}\n\nfunction removeDependencyUrlWindow({url}: IRemoveDepencyUrl) {\n    const {'vamtiger-browser-method': metaElement } = self;\n    const dependencyUrlMetaElement = metaElement.querySelector<HTMLMetaElement>(Selector.dependencyUrlMetaElement);\n    const selector = `meta[data-url=\"${url}\"]`;\n    const urlMetaElement = dependencyUrlMetaElement && dependencyUrlMetaElement.querySelector<HTMLMetaElement>(selector);\n\n    if (urlMetaElement && dependencyUrlMetaElement) {\n        dependencyUrlMetaElement.removeChild(urlMetaElement);\n    }\n}","import {\n    MessageAction,\n    MessageResponse\n} from './types';\nimport getMessageData from './get-message-data';\nimport removeRedundantScripts from './remove-redundant-scripts';\nimport { setWorkerSupport } from './set-support';\nimport saveWebComponentData from './save-web-component-data';\nimport sendMessage from './send-message';\nimport ignoreMessage from './ignore-message';\nimport getWebComponentData from './get-web-component-data';\nimport dequeue from './dequeue';\nimport loadWebComponentData from './load-web-component-data';\nimport saveSupport from './save-support';\nimport saveCustomElementName from './save-custom-element-name';\nimport getTextModeCss from './get-text-mode-css';\nimport loadScript from './handle-load-script';\nimport loadMethod from './load-method';\nimport updateMethod from './update-method';\nimport getMethodResult from './get-method-result';\nimport importDependencies from './import-dependencies';\nimport removeDependencyUrl from './remove-dependency-url';\n\nconst action = {\n    [MessageAction.ignore]: ignoreMessage,\n    [MessageAction.removeRedundantScripts]: removeRedundantScripts,\n    [MessageAction.setWorkerSupport]: setWorkerSupport,\n    [MessageAction.saveWebComponentData]: saveWebComponentData,\n    [MessageAction.getWebComponentData]: getWebComponentData,\n    [MessageAction.dequeue]: dequeue,\n    [MessageAction.loadWebComponentData]: loadWebComponentData,\n    [MessageAction.saveSupport]: saveSupport,\n    [MessageAction.saveCustomElementName]: saveCustomElementName,\n    [MessageAction.getTextModeCss]: getTextModeCss,\n    [MessageAction.loadScript]: loadScript,\n    [MessageAction.loadMethod]: loadMethod,\n    [MessageAction.updateMethod]: updateMethod,\n    [MessageAction.getMethodResult]: getMethodResult,\n    [MessageAction.importDependencies]: importDependencies,\n    [MessageAction.removeDependencyUrl]: removeDependencyUrl\n}\n\nexport default async function (event: MessageEvent) {\n    const { action: actionName, params } = getMessageData(event) || { action: MessageAction.ignore, params: {}};\n    const currentAction = action[actionName];\n    const response = await currentAction(params) as MessageResponse;\n\n    response && sendMessage(response);\n}","import {\n    HostName\n} from './types';\n\nexport default function() {\n    const { location } = window;\n    const isLocalHost = HostName.localHost === location.hostname;\n\n    return isLocalHost;\n}","import {\n    LocalHostRelativePath\n} from './types';\nimport isLocalHost from './is-local-host';\n\nconst { vamtigerBrowserMethod: url } = LocalHostRelativePath;\n\nexport default async function() {\n    const validUrl = isLocalHost() && await fetch(url)\n        .then(response => response.ok)\n        .catch(error => '');\n    const localHostRelativeUrl = validUrl && url || '';\n\n    return localHostRelativeUrl;\n}","import {\n    Selector,\n    ScriptType,\n    StringConstant\n} from './types';\n\nconst params = {\n    type: ScriptType.js\n}\nconst { newline } = StringConstant;\n\nexport default function () {\n    const { head } = document;\n    const { createObjectURL } = URL;\n    const workderScript = head.querySelector<HTMLScriptElement>(Selector.vamtigerBrowserMethod);\n    const workerDependecies = (Array.from(head.querySelectorAll<HTMLScriptElement>(Selector.workderDependency)) || [])\n        .map(({ innerHTML }) => innerHTML)\n        .filter(script => script);\n    const workerScripts = [\n        ...workerDependecies,\n        workderScript && workderScript.innerHTML || ''\n    ].filter(script => script).join(newline.repeat(2));\n    const workerBlob = workerScripts && workerScripts.length && new Blob([workerScripts], params);\n    const workerUrl = workerBlob && createObjectURL && createObjectURL(workerBlob);\n\n    return workerUrl;\n}","import handleMessage from './handle-message';\nimport getLocalHostWorkerUrl from './get-local-host-worker-url';\nimport getWorkerUrl from './get-worker-url';\n\nconst { stringify } = JSON;\n\nlet worker: Worker;\n\nexport default async function () {\n    const localHostWorkerUrl = await getLocalHostWorkerUrl();\n    const workerUrl = getWorkerUrl();\n    const currentWorker = workerUrl && new Worker(localHostWorkerUrl || workerUrl);\n\n    if (currentWorker) {\n        currentWorker.addEventListener('message', handleMessage);\n        currentWorker.addEventListener('error', handleError);\n    }\n\n    worker = worker || currentWorker;\n\n    return worker;\n}\n\nexport function handleError(event: ErrorEvent) {\n    const keys = Object.keys(event) as (keyof ErrorEvent)[];\n\n    keys.forEach(key => console.error(typeof event[key] === 'string' || stringify(event[key])));\n}","import {\n    DataAttribute,\n    StringConstant\n} from './types';\nimport {\n    intersectionObserver as config,\n} from './config';\n\nconst { IntersectionObserver, requestIdleCallback } = self;\nconst { nothing } = StringConstant;\nconst defaultObserver = IntersectionObserver && new IntersectionObserver(handleIntersect, config);\n\nexport default function () {\n    return defaultObserver;\n}\n\nfunction handleIntersect(entries: IntersectionObserverEntry[], observer: IntersectionObserver) {\n    entries.forEach(entry => {\n        if (requestIdleCallback) {\n            requestIdleCallback(() => handleIntersectElement(entry));\n        } else {\n            setTimeout(() => handleIntersectElement(entry), 0);\n        }\n    })\n}\n\nfunction handleIntersectElement(entry: IntersectionObserverEntry) {\n    const {\n        isIntersecting,\n        intersectionRatio,\n        target: element\n    } = entry as IntersectionObserverEntry & {isVisible: boolean;};\n    const { dataset } = element as HTMLElement;\n\n    if (isIntersecting) {\n        dataset[DataAttribute.visible] = intersectionRatio.toString();\n    } else if (dataset[DataAttribute.visible]) {\n        dataset[DataAttribute.visible] = nothing;\n    }\n}","import {\n   StringConstant,\n   regex\n} from './types';\n\nconst { slash } = StringConstant;\nconst { trailingHtml } = regex;\n\nexport default function () {\n    const { pathname: relativePath } = location;\n    const urlPaths = relativePath.match(trailingHtml) && relativePath.split(slash);\n    const pageUrl = urlPaths && urlPaths.slice(0, urlPaths.length - 1).join(slash)\n        || relativePath;\n\n    return pageUrl;\n}","import {\n    LocalHostRelativePath,\n    StringConstant\n} from './types';\nimport { serviceWorker as config } from './config';\nimport isWindow from './is-window';\nimport getPageRelativeUrl from './get-page-relative-url';\n\nconst { slash, nothing } = StringConstant;\nconst { vamtigerBrowserMethod } = LocalHostRelativePath;\n\nexport default async function () {\n    const sharedWorkerRegistration = isWindow() && await getServiceWorker() || undefined;\n\n    return sharedWorkerRegistration;\n}\n\nasync function getServiceWorker() {\n    const { serviceWorker } = navigator;\n    const { origin } = location;\n    const url = [\n        origin,\n        vamtigerBrowserMethod\n    ].join(slash);\n    const pageUrl = getPageRelativeUrl();\n    const secondaryUrl = [\n        pageUrl === slash ? '' : pageUrl,\n        vamtigerBrowserMethod\n    ].join(nothing);\n    const secondaryConfig = {\n        ...config,\n        scope: pageUrl\n    };\n    const sharedWorkerRegistration = serviceWorker && await serviceWorker\n        .register(url, config)\n        .catch(handleError);\n    const secondarySharedWorkerRegistration = !sharedWorkerRegistration && secondaryUrl !== url && serviceWorker && await serviceWorker\n        .register(secondaryUrl, secondaryConfig)\n        .catch(handleError);\n    const registration = sharedWorkerRegistration || secondarySharedWorkerRegistration;\n\n    return registration;\n}\n\nfunction handleError(error: Error) {\n    console.warn(error.message);\n}","import {\n    ElementId,\n    DataAttribute,\n    StringConstant,\n    MessageAction\n} from './types';\nimport getWorker from './get-worker';\nimport isWindow from './is-window';\nimport isTextMode from './is-text-mode';\nimport getIntersectionObserver from './get-intersection-observer';\nimport getServiceWorkerRegistration from './get-service-worker-registration';\nimport handleMessage from './handle-message';\n\nconst { nothing } = StringConstant;\nconst metaElementHtml = [\n    '<meta data-custom-element-name>',\n    '<meta data-dependency>'\n].join(nothing)\n\nexport default function () {\n    if (isWindow()) {\n        setEventListeser();\n\n        setupWindow();\n    }\n}\n\nfunction setEventListeser() {\n    const { serviceWorker } = navigator;\n\n    serviceWorker && serviceWorker.addEventListener('message', handleMessage);\n}\n\nasync function setupWindow() {\n    const { serviceWorker } = navigator;\n    const { head } = document;\n    const firstMetaElement = head.querySelector('meta');\n    const { VamtigerBrowserMethod } = self;\n    const { metaElement = document.createElement('meta') } = VamtigerBrowserMethod;\n    const customeElementMetaElement = document.createElement('meta');\n    const textMode = isTextMode();\n    const serviceWorkerRegistration = await getServiceWorkerRegistration();\n    const messageChannel = new MessageChannel();\n    const { port1 } = messageChannel;\n\n    customeElementMetaElement.dataset[DataAttribute.customElementName] = nothing;\n\n    metaElement.id = ElementId.metaElement;\n\n    metaElement.innerHTML = metaElementHtml;\n\n    head.insertBefore(metaElement, firstMetaElement);\n\n    VamtigerBrowserMethod.metaElement = metaElement;\n\n    VamtigerBrowserMethod.worker = await getWorker();\n\n    VamtigerBrowserMethod.textMode = textMode;\n\n    VamtigerBrowserMethod.intersectionObserver = getIntersectionObserver();\n\n    VamtigerBrowserMethod.serviceWorkerRegistration = serviceWorkerRegistration;\n\n    VamtigerBrowserMethod.serviceWorker = serviceWorker && serviceWorker.controller || undefined;\n\n    VamtigerBrowserMethod.messageChannel = messageChannel;\n\n    port1.addEventListener('message', handleMessage);\n}","import {\n    selector\n} from './types'\nimport handleMessage from './handle-message';\nimport isWorker from './is-worker';\nimport removeRedundantScripts from './remove-redundant-scripts';\n\nexport default function () {\n    isWorker() && setupWorker();\n}\n\nfunction setupWorker() {\n    addEventListener('message', handleMessage);\n\n    return removeRedundantScripts({\n        selector: selector.redundantScripts\n    });\n}","export default `<figcaption data-linked-data-caption></figcaption> <span data-linked-data-caption-element></span> <a></a>`;","import {\n    IGetTemplate,\n    GetTemplate,\n    StringConstant,\n    AttributesKey\n} from './types';\nimport html from './html';\n\nlet template: HTMLTemplateElement;\nlet templateHtml: string;\n\nconst { document } = self;\nconst { nothing } = StringConstant;\n\nif (document) {\n    template = document.createElement('template');\n\n    templateHtml = [\n        html\n    ].join(nothing);\n\n    template.innerHTML = templateHtml;\n}\n\nexport default <P extends IGetTemplate>(params: P) => {\n    const {\n        selector,\n        attributes = {},\n        properties = {}\n    } = params;\n    const attributesKeys = Object.keys(attributes) as AttributesKey[]\n    const templateElement = template.content.querySelector(selector);\n    const currentTemplate = templateElement && templateElement.cloneNode(true) as GetTemplate<P>;\n\n    if (currentTemplate) {\n        Object.assign(currentTemplate, properties);\n\n        attributesKeys.forEach(key => attributes[key] && currentTemplate.setAttribute(key, attributes[key] || ''));\n    }\n\n    return currentTemplate;\n};","import {\n    IGetMicrodataCaption,\n    IAnyObject,\n    Selector,\n    StringConstant\n} from './types';\nimport getTemplate from './get-template';\n\nconst { nothing, slash } = StringConstant;\n\nexport default function ({ imageData, fieldKey }: IGetMicrodataCaption) {\n    const field = imageData[fieldKey] as IAnyObject | undefined;\n    const fieldData = Array.isArray(field) && field || [field] || [];\n    const caption = field && getTemplate({\n        selector: Selector.linkedDataCaption,\n        attributes: {\n            itemprop: fieldKey\n        }\n    });\n\n    let itemtype: string;\n    let currentCaption: HTMLElement | null;\n    let currentProducerCaptionElements: (HTMLElement | null)[]\n\n    fieldData.forEach(currentFieldData => {\n        if (currentFieldData) {\n            itemtype = currentFieldData['@context'] && currentFieldData['@type'] && [\n                currentFieldData['@context'],\n                currentFieldData['@type']\n            ].join(slash);\n            currentCaption = getTemplate({\n                selector: Selector.linkedDataCaption\n            });\n\n            if (currentCaption) {\n                currentCaption.setAttribute('itemscope', nothing);\n                itemtype && currentCaption.setAttribute('itemtype', itemtype);\n\n                currentProducerCaptionElements = [\n                    currentFieldData.name && getTemplate({\n                        selector: Selector.linkedDataCaptionElement,\n                        properties: {\n                            innerHTML: currentFieldData.name\n                        },\n                        attributes: {\n                            itemprop: 'name'\n                        }\n                    }),\n                    currentFieldData.description && getTemplate({\n                        selector: Selector.linkedDataCaptionElement,\n                        properties: {\n                            innerHTML: currentFieldData.description\n                        },\n                        attributes: {\n                            itemprop: 'description'\n                        }\n                    }),\n                    currentFieldData.url && getTemplate({\n                        selector: Selector.a,\n                        properties: {\n                            innerHTML: currentFieldData.name || currentFieldData.url\n                        },\n                        attributes: {\n                            itemprop: 'url',\n                            href: currentFieldData.url\n                        }\n                    })\n                ];\n\n                currentProducerCaptionElements.forEach(currentElement => currentElement && currentCaption && currentCaption.appendChild(currentElement));\n\n                caption && caption.appendChild(currentCaption);\n            }\n        }\n    });\n\n    return caption\n}","import {\n    IGetTabLink\n} from './types';\n\nexport default function ({ href, text }: IGetTabLink) {\n    const link = href && text && `<a href=\"${href}\" target=\"_blank\">${text}</a>` || '';\n\n    return link;\n}","import {\n    IGetEmailLink\n} from './types';\n\nexport default function ({ href, text }: IGetEmailLink) {\n    const link = href && text && `<a href=\"mailto:${href}\">${text}</a>` || '';\n\n    return link;\n}","import {\n    IGetJsonLdArray,\n    IGetJsonLdArrayGetEntry,\n    StringConstant,\n    regex\n} from './types';\nimport {\n    jsonLdEntryValueType\n} from './config';\nimport getTabLink from './get-tab-link';\nimport getEmailLink from './get-email-link';\n\nconst { requestIdleCallback } = self;\nconst { nothing, slash } = StringConstant;\nconst { leadingAt, remoteUrl, email } = regex;\n\nexport default function (params: IGetJsonLdArray) {return new Promise(async (resolve: (jsonLdArray: string[][]) => void, reject) => {\n    if (requestIdleCallback) {\n        requestIdleCallback(() => getJsonLdArray(params).then(resolve).catch(reject));\n    } else {\n        setTimeout(() => getJsonLdArray(params).then(resolve).catch(reject), 0);\n    }\n})}\n\nexport async function getJsonLdArray({ jsonLd: currentJsonLd }: IGetJsonLdArray) {\n    const jsonLd = getJsonLd({\n        jsonLd: currentJsonLd\n    });\n    const keys = Object.keys(jsonLd);\n    const entries = await Promise.all(keys.map(key => getEntry({key, value: jsonLd[key]})));\n    const jsonLdArray = [] as string[][];\n\n    entries.forEach(entries => entries.forEach(entry => jsonLdArray.push(entry)));\n\n    return jsonLdArray;\n}\n\nfunction getJsonLd({ jsonLd }: IGetJsonLdArray) {\n    const { _ } = self;\n    const { startCase } = _;\n    const {\n        '@context': context = undefined,\n        '@type': type = undefined\n    } = jsonLd;\n    const typeLinkHref = context && type && [\n        context,\n        type\n    ].join(slash);\n    const typeLinkText = type && startCase(type);\n    const typeLink = getTabLink({\n        href: typeLinkHref,\n        text: typeLinkText\n    });\n\n    if (typeLink) {\n        jsonLd['@type'] = typeLink;\n    }\n\n    return jsonLd;\n}\n\nasync function getEntry({key, value}: IGetJsonLdArrayGetEntry) {\n    const { _ } = self;\n    const { startCase } = _;\n    const entryValue = jsonLdEntryValueType.has(typeof value) && value as string | number | boolean;\n    const valueArray = Array.isArray(value) && value || typeof value === 'object' && [value];\n    const nestedEntries = valueArray && await Promise.all(valueArray.map(jsonLd => getJsonLdArray({ jsonLd })));\n    const entry = [[startCase(key.replace(leadingAt, nothing)), entryValue && (key.match(email) && getEmailLink({href: entryValue.toString(), text: entryValue.toString()}) || getEntryValue(entryValue)) || nothing]];\n\n    nestedEntries && nestedEntries.forEach(nestedEntry => nestedEntry.forEach(currentNestedEntry => entry.push(currentNestedEntry)));\n\n    return entry;\n}\n\nfunction getEntryValue(value: string | number | boolean) {\n    const valueString = value.toString().trim();\n    const linkHref = valueString.match(remoteUrl) && valueString;\n    const linkText = linkHref && valueString && valueString.split(slash).pop();\n    const link = linkHref && linkText && getTabLink({\n        href: linkHref,\n        text: linkText\n    });\n    const entryValue = link || valueString;\n\n    return entryValue;\n}","import {\n    getDependencies\n} from './config';\nimport loadScript from './load-script';\nimport isWindow from './is-window';\nimport isWorker from './is-worker';\nimport isSeriveWorker from './is-service-worker';\n\nexport default async function () {\n    if (isWindow()) {\n        await loadDependenciesWindow();\n    } else if (isWorker() || isSeriveWorker) {\n        await loadDependenciesWorker();\n    }\n}\n\nasync function loadDependenciesWindow() {\n    const workerDependency = true;\n    const dependencies = getDependencies();\n\n    await Promise.all(dependencies.map(src => loadScript({name: src, src, workerDependency})));\n}\n\nasync function loadDependenciesWorker() {\n    const { importScripts } = self;\n    const dependencies = getDependencies();\n\n    importScripts && await Promise.all(dependencies.map(url => importScripts(url)));\n}","import {\n    IDispatchEvent,\n    EventName,\n    Origin\n} from './types';\nimport isWindow from './is-window';\n\nconst eventParams = {\n    bubbles: true\n};\n\nexport default function (params: IDispatchEvent) {\n    isWindow() && postWindowMessage(params);\n}\n\nfunction postWindowMessage({eventName, detail = {}}: IDispatchEvent) {\n    const event = new CustomEvent(eventName, {\n        ...eventParams,\n        detail\n    });\n\n    self.dispatchEvent(event);\n}","import {\n    FetchEvent\n} from './types';\nimport getCache from './get-cache';\n\nexport default async function ({request}: FetchEvent) {\n    const cache = await getCache();\n    const response = await fetch(request);\n    const cacheResponse = response\n        && (response.status === 200 || response.type === 'opaque')\n        && response.clone();\n\n    if (cache && cacheResponse) {\n        await cache.put(request, cacheResponse).catch(handleError);;\n    }\n\n    return response;\n}\n\nfunction handleError(error: Error) {\n    console.warn(error.message);\n}","import {\n    IUpdateRequestCache\n} from './types';\nimport getCache from './get-cache';\n\nexport default async function ({request}: IUpdateRequestCache) {\n    const cache = await getCache();\n    const response = await fetch(request).catch(handleError);\n    const updateCache = response\n        && (response.status === 200 || response.type === 'opaque');\n\n    if (cache && updateCache && response) {\n        await cache.put(request, response).catch(handleError);\n    }\n}\n\nfunction handleError(error: Error) {\n    console.warn(error.message);\n}","import {\n    FetchEvent\n} from './types';\nimport getCache from './get-cache';\nimport updateRequestCache from './update-request-cache';\n\nexport default async function ({request}: FetchEvent) {\n    const cache = await getCache();\n    const response = cache && await cache.match(request);\n\n    if (response) {\n        updateRequestCache({request});\n    }\n\n    return response;\n}","import {\n    FetchEvent\n} from './types';\nimport getFetchResponse from './get-fetch-response';\nimport getCachedFetchResponse from './get-cached-fetch-response';\n\nexport default async function (event: FetchEvent) {\n    const cachedResponse = await getCachedFetchResponse(event);\n    const response = cachedResponse || await getFetchResponse(event);\n\n    return response;\n}","import {\n    ISupport,\n    MessageAction\n} from './types';\nimport {\n    workerDependencies\n} from './config';\nimport isServiceWorker from './is-service-worker';\nimport sendMessage from './send-message';\n\nexport default function (event: Event) {\n    isServiceWorker() && handleServiceWorkerActivation(event);\n}\n\nasync function handleServiceWorkerActivation(event: Event) {\n    const { importScripts } = self;\n    const { VamtigerBrowserMethod } = self;\n    const { support, environment } = VamtigerBrowserMethod;\n    const { indexedDbIsAccessible } = (support || {}) as ISupport;\n    const params = indexedDbIsAccessible && support && {\n        environment,\n        ...support\n    } || {};\n    const message = {\n        action: MessageAction.saveSupport,\n        params\n    };\n\n    sendMessage(message);\n\n    importScripts && workerDependencies.forEach(dependency => importScripts(dependency));\n}","import {\n    FetchEvent\n} from './types';\nimport isServiceWorker from './is-service-worker';\nimport handleFetchRequest from './handle-fetch-request';\nimport handleServiceWorkerActivation from './handle-service-worker-activation';\nimport handeMessage from './handle-message';\n\nexport default function () {\n    isServiceWorker() && setupServiceWorker();\n}\n\nasync function setupServiceWorker() {\n    addEventListener('install', handleServiceWorkerActivation);\n\n    addEventListener('activate', handleServiceWorkerActivation);\n\n    addEventListener('message', handeMessage);\n\n    addEventListener('fetch', event => handleFetchRequest(event as FetchEvent));\n}","import {\n    EventName,\n    ILoadMethod\n} from './types';\nexport * from './load-ts-lib';\nimport loadScript from './load-script';\nimport loadScripts from './load-scripts';\nimport loadScriptsSequentially from './load-scripts-sequentially';\nimport loadShadowStylesheet from './load-shadow-stylesheet';\nimport defineCustomElement from './define-custom-element';\nimport pause from './pause';\nimport getElement from './get-element';\nimport getData from './get-data';\nimport getEnvironment from './get-environment';\nimport setupWindow from './setup-window';\nimport setupWorker from './setup-worker';\nimport setSupport from './set-support';\nimport getMicrodataCaption from './get-microdata-caption';\nimport getJsonLdArray from './get-json-ld-array';\nimport loadDependencies from './load-dependencies';\nimport dispatchEvent from './dispatch-event';\nimport setupServiceWorker from './setup-service-worker';\nimport loadMethod from './load-method';\n\nconst environment = getEnvironment();\nconst vamtigerBrowserMethod = {\n    loadScript,\n    loadScripts,\n    loadScriptsSequentially,\n    loadMethod: async (params: ILoadMethod) => Boolean(await loadMethod(params)),\n    loadShadowStylesheet,\n    defineCustomElement,\n    pause,\n    getElement,\n    getData,\n    getEnvironment,\n    environment,\n    messageQueue: new Map(),\n    getMicrodataCaption,\n    getJsonLdArray,\n    method: {}\n};\n\nmain().catch(handleError);\n\nasync function main() {\n    try {\n        const { VamtigerBrowserMethod } = self;\n\n        if (!VamtigerBrowserMethod) {\n            self.VamtigerBrowserMethod = vamtigerBrowserMethod;\n\n            setupServiceWorker();\n\n            await loadDependencies();\n\n            await Promise.all([\n                setSupport(),\n                setupWindow(),\n                setupWorker()\n            ]);\n\n            dispatchEvent({eventName: EventName.vamtigerBrowserMethodReady})\n        }\n    } catch(error) {\n        handleError(error);\n    }\n}\n\nfunction handleError(error: Error) {\n    console.error(error);\n    throw error;\n}"],"names":["__extends","__assign","__rest","__decorate","__param","__metadata","__awaiter","__generator","selector","nothing","loadElementQueryCss","baseConfig","requestIdleCallback","removeRedundantScripts","parse","loadScript","handleError","mode","keyPath","storeName","ignore","dash","noElementName","noElementForSelector","getElement","getWebComponentData","getData","stringify","loadWebComponentData","viewJsonLd","getMessageData","slash","sendMessge","action","ignoreMessage","handleMessage","config","serviceWorker","setupWindow","setupWorker","document","remoteUrl","getJsonLdArray","getJsonLd","isSeriveWorker","handleServiceWorkerActivation","setupServiceWorker","vamtigerBrowserMethod"],"mappings":"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"}