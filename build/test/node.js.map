{"version":3,"file":"node.js","sources":["../../node_modules/tslib/tslib.js","../../source/types.ts","../../source/config.ts","../../source/test/generate.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global global, define, System, Reflect, Promise */\r\nvar __extends;\r\nvar __assign;\r\nvar __rest;\r\nvar __decorate;\r\nvar __param;\r\nvar __metadata;\r\nvar __awaiter;\r\nvar __generator;\r\nvar __exportStar;\r\nvar __values;\r\nvar __read;\r\nvar __spread;\r\nvar __await;\r\nvar __asyncGenerator;\r\nvar __asyncDelegator;\r\nvar __asyncValues;\r\nvar __makeTemplateObject;\r\nvar __importStar;\r\nvar __importDefault;\r\n(function (factory) {\r\n    var root = typeof global === \"object\" ? global : typeof self === \"object\" ? self : typeof this === \"object\" ? this : {};\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"tslib\", [\"exports\"], function (exports) { factory(createExporter(root, createExporter(exports))); });\r\n    }\r\n    else if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        factory(createExporter(root, createExporter(module.exports)));\r\n    }\r\n    else {\r\n        factory(createExporter(root));\r\n    }\r\n    function createExporter(exports, previous) {\r\n        if (exports !== root) {\r\n            if (typeof Object.create === \"function\") {\r\n                Object.defineProperty(exports, \"__esModule\", { value: true });\r\n            }\r\n            else {\r\n                exports.__esModule = true;\r\n            }\r\n        }\r\n        return function (id, v) { return exports[id] = previous ? previous(id, v) : v; };\r\n    }\r\n})\r\n(function (exporter) {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\n    __extends = function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n\r\n    __assign = Object.assign || function (t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n\r\n    __rest = function (s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n                t[p[i]] = s[p[i]];\r\n        return t;\r\n    };\r\n\r\n    __decorate = function (decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    };\r\n\r\n    __param = function (paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    };\r\n\r\n    __metadata = function (metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    };\r\n\r\n    __awaiter = function (thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    };\r\n\r\n    __generator = function (thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    };\r\n\r\n    __exportStar = function (m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    };\r\n\r\n    __values = function (o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    };\r\n\r\n    __read = function (o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    };\r\n\r\n    __spread = function () {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    };\r\n\r\n    __await = function (v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    };\r\n\r\n    __asyncGenerator = function (thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    };\r\n\r\n    __asyncDelegator = function (o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    };\r\n\r\n    __asyncValues = function (o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    };\r\n\r\n    __makeTemplateObject = function (cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    __importStar = function (mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result[\"default\"] = mod;\r\n        return result;\r\n    };\r\n\r\n    __importDefault = function (mod) {\r\n        return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n    };\r\n\r\n    exporter(\"__extends\", __extends);\r\n    exporter(\"__assign\", __assign);\r\n    exporter(\"__rest\", __rest);\r\n    exporter(\"__decorate\", __decorate);\r\n    exporter(\"__param\", __param);\r\n    exporter(\"__metadata\", __metadata);\r\n    exporter(\"__awaiter\", __awaiter);\r\n    exporter(\"__generator\", __generator);\r\n    exporter(\"__exportStar\", __exportStar);\r\n    exporter(\"__values\", __values);\r\n    exporter(\"__read\", __read);\r\n    exporter(\"__spread\", __spread);\r\n    exporter(\"__await\", __await);\r\n    exporter(\"__asyncGenerator\", __asyncGenerator);\r\n    exporter(\"__asyncDelegator\", __asyncDelegator);\r\n    exporter(\"__asyncValues\", __asyncValues);\r\n    exporter(\"__makeTemplateObject\", __makeTemplateObject);\r\n    exporter(\"__importStar\", __importStar);\r\n    exporter(\"__importDefault\", __importDefault);\r\n});\r\n","import * as tslib from 'tslib/tslib';\nimport { requestIdleCallback } from 'requestidlecallback';\nimport * as lodash from 'lodash';\n\nexport enum Environment {\n    window = 'window',\n    worker = 'worker'\n}\n\nexport enum TimeoutDuration {\n    webComponent = 60000,\n    indexDbIsAccessible = 100\n}\n\nexport enum MessageQueueName {\n    webComponent = 'webComponent'\n}\n\nexport enum Prefix {\n    vamtigerBrowserMethod = 'vamtiger-browser-method',\n    db = 'vamtiger-browser-method',\n    messageIdWindow = 'vamtiger-browser-method-window',\n    messageIdWorker = 'vamtiger-browser-method-worker'\n}\n\nexport enum Origin {\n    nowhere = '',\n    everyWhere = '*'\n}\n\nexport enum HostName {\n    localHost = 'localhost'\n}\n\nexport enum LocalHostRelativePath {\n    vamtigerBrowserMethod = 'vamtiger-browser-method.js'\n}\n\nexport enum ScriptType {\n    js = 'text/javascript',\n    babel = 'text/babel',\n    json = 'application/json',\n    jsonld = 'application/ld+json'\n}\n\nexport enum ScriptAttribute {\n    type = 'type'\n}\n\nexport enum DataAttribute {\n    vamtigerElementQuery = 'vamtigerLoadElementQueryCss',\n    elementQueryCssLoaded = 'elementQueryCssLoaded'\n}\n\nexport enum ErrorMessage {\n    failedToLoadScript = 'Failed to load script',\n    windowPropertyNotSet = 'Window property not set',\n    unsupportedFeature = 'Unsupported feature',\n    customElementAreadyDefined = 'Custom element already defined',\n    noElementName = 'No Element Name',\n    noTemplateUrl = 'No Template URL',\n    noElementSelector = 'No Template Selector',\n    noTemplateForUrl = 'No Template for URL',\n    noTemplate = 'No Template',\n    noElementForSelector = 'No Element for Selector',\n    noJsonLdParameter = 'No \"jsonLd\" property set'\n}\n\nexport enum StringConstant {\n    nothing = '',\n    slash = '/',\n    dash = '-',\n    pipe = '|',\n    comma = ',',\n    backTick = '`',\n    doubleQuote = '\"',\n    commaSpace = ', ',\n    space = ' ',\n    period = '.'\n}\n\nexport enum TagName {\n    div = 'div',\n    template = 'template'\n}\n\nexport enum LinkRel {\n    stylesheet = 'stylesheet'\n}\n\nexport enum LoadScriptElement {\n    script = 'script',\n    link = 'link',\n    style = 'style'\n}\n\nexport enum Selector {\n    lastStylesheet = 'style:last-of-type',\n    lastMetaElement = 'head > meta:last-of-type',\n    webcomponentsjs = 'script[src*=\"@webcomponents\\/webcomponentsjs\"]',\n    style = 'style',\n    stylesheet = ' link[rel=\"stylesheet\"]',\n    vamtigerBrowserMethodJsonJs = '[src$=\"vamtiger-browser-method.js.json.js\"]',\n    worker = '[src$=\"js.json.js\"][data-worker]',\n    vamtigerBrowserMethodJson = '[data-name$=\"vamtiger-browser-method.js.json\"]',\n    vamtigerBrowserMethod = '[data-name$=\"vamtiger-browser-method.js\"]',\n    script = 'script',\n    jsonScript = 'script[type=\"application/json\"]',\n    jsonLdScript = 'script[type=\"application/ld+json\"]',\n    a = 'a',\n    linkedDataCaption = '[data-linked-data-caption]',\n    linkedDataCaptionElement = '[data-linked-data-caption-element]'\n}\n\nexport enum  MetaElementName {\n    loadElementQueryCss = 'vamtiger-load-element-query-css'\n}\n\nexport enum ScriptNameSuffix {\n    style = 'style',\n    stylesheet = 'stylesheet'\n}\n\nexport enum MessageAction {\n    ignore = 'ignore',\n    removeRedundantScripts = 'removeRedundantScripts',\n    setWorkerSupport = 'setWorkerSupport',\n    saveWebComponentData = 'saveWebComponentData',\n    getWebComponentData = 'getWebComponentData',\n    dequeue = 'dequeue',\n    loadWebComponentData = 'loadWebComponentData',\n    saveSupport = 'saveSupport'\n}\n\nexport enum DbName {\n    vamtigerBrowserSupport = 'vamtiger-browser-support'\n}\n\nexport enum DbStoreName {\n    support = 'support',\n    webComponent = 'web-component'\n}\n\nexport enum DbMode {\n    readonly = 'readonly',\n    readwrite = 'readwrite',\n    versionchange = 'versionchange'\n}\n\nexport enum DbKeyPath {\n    webComponent = 'url',\n    support = 'environment'\n}\n\nexport enum Dependency {\n    lodash = 'https://vamtiger-project.github.io/vamtiger-browser-method/build/lodash.min.js.json.js'\n}\n\nexport interface IDequeue {\n    key: string;\n    data: IAnyObject;\n}\n\nexport interface IGetDbParams {\n    storeName: DbStoreName;\n    keyPath: DbKeyPath;\n    mode: DbMode;\n}\n\nexport interface IGetDbParamsHandleUpgradeNeeded extends Pick<IDbParams, 'db'>{}\n\nexport interface IDbParams {\n    db: IDBDatabase;\n    transaction: IDBTransaction;\n    store: IDBObjectStore;\n}\n\nexport interface ILoadRemoteScriptParams {\n    src: string;\n}\n\nexport interface ILoadRemoteStylesheetScriptParams {\n    href: string;\n}\n\nexport interface IIsJsonScript {\n    script: HTMLScriptElement;\n}\n\nexport interface ILoadLocalScriptParams {\n    name: string;\n    removeFromDom?: boolean;\n    transpileJs?: boolean;\n}\n\nexport interface ILoadScriptParams {\n    js: string;\n    jsonld?: boolean;\n}\n\nexport interface ILoadJsonScriptParams {\n    json: string;\n}\n\nexport interface ILoadStylesheetScriptParams {\n    css: string;\n}\n\nexport interface IAnyObject {\n    [key: string]: any;\n}\n\nexport interface IJsonData {\n    jsonLd: IAnyObject[];\n    json?: IAnyObject;\n}\n\nexport interface IJsonJsonLd {\n    index: number;\n    fields: {\n        [key: string]: string[];\n    }\n}\n\nexport interface ILoadScript {\n    params: LocalScriptParams\n        | LocalStylesheetScriptParams\n        | ILoadRemoteScriptParams\n        | ILoadRemoteStylesheetScriptParams\n        | ILoadJsonScriptParams;\n    reject: (error: Error) => void\n}\n\nexport interface ILoadScriptLoadJsJsonJs {\n    src: string;\n}\n\nexport interface ILoadShadowStylesheet {\n    css: string;\n    element: HTMLElement;\n}\n\nexport interface IJsonScriptData {\n    name: string;\n    text: string;\n}\n\nexport interface IDefineCustomElement {\n    name: string;\n    constructor: {\n        new (): HTMLElement\n        prototype: HTMLElement;\n    };\n    ignore?: boolean;\n}\n\nexport interface IPause {\n    milliseconds: number;\n}\n\nexport interface IGetElementBase {\n    name: string;\n    loadStylesheets?: boolean;\n}\n\nexport interface IGetElementTemplate extends IGetElementBase {\n    template: string;\n    selector?: string;\n}\n\nexport interface IGetElementUrl extends IGetElementBase {\n    url: string;\n    selector:  string;\n}\n\nexport interface ILoadElementQueryCss {\n    css: string;\n    stylesheetName?: string;\n    hostName?: string;\n}\n\nexport interface IGetJsonLdArray {\n    jsonLd: IAnyObject;\n}\n\nexport interface IGetJsonLdArrayGetEntry {\n    key: string;\n    value: string | IAnyObject | IAnyObject[];\n}\n\nexport interface IGetMetaElement {\n    selector?: string;\n    properties?: {\n        id?: string;\n    };\n    attributes?: {\n        [key: string]: string;\n    };\n    dataset?: DOMStringMap;\n}\n\nexport interface IGetBabelJs {\n    url?: string;\n    js?: string;\n}\n\nexport interface ILoadContainerStylesheets {\n    name: string;\n    container: HTMLTemplateElement;\n}\n\nexport interface IGetData {\n    jsonLd: string;\n}\n\nexport interface IGetJsonLd {\n    jsonLd: string;\n    loadJsonJsonLd?: boolean;\n}\n\nexport interface IJosnLdImageObject {\n    \"@context\": string;\n    '@type': string;\n    name: string;\n    description: string;\n    author: {\n        '@type': string;\n        givenName: string;\n        familyName: string;\n        email: string;\n    };\n    datePublished: string;\n    contentUrl: string;\n}\n\nexport interface IMessageAction {\n    action: MessageAction;\n    params: IAnyObject & {\n        messageId?: string;\n    };\n}\n\nexport interface IRemoveRedundantScripts {\n    selector: string;\n}\n\nexport interface IRemoveRedundantScriptsRemoveScripts extends IRemoveRedundantScripts {\n    parent: HTMLElement;\n}\n\nexport interface IRemoveRedundantScriptsRemoveScriptsFromParent extends IRemoveRedundantScriptsRemoveScripts {\n    resolve?: () => void;\n    reject?: (error: Error) => void;\n}\n\nexport interface ISupport {\n    localStorage: boolean;\n    indexedDb: boolean;\n    indexedDbIsAccessible: boolean;\n    worker: boolean;\n    sharedWorker: boolean;\n    textEncoder: boolean;\n    textDecoder: boolean;\n}\n\nexport interface ISaveSupport extends ISupport {\n    environment: Environment;\n}\n\nexport interface ISaveWebComponentData extends IWebComponentData {}\n\nexport interface IGetWebComponentData {\n    key: string;\n}\n\nexport interface IGetDbName {\n    dbName: DbName\n}\n\nexport interface ISaveIndexedDbData {\n    storeName: DbStoreName;\n    keyPath: DbKeyPath;\n    messageId?: string;\n    data: IWebComponentData | ISupport;\n}\n\nexport interface IGetIndexedDbData {\n    storeName: DbStoreName;\n    keyPath: DbKeyPath;\n    key: string;\n    messageId?: string;\n}\n\nexport interface ISaveIndexedDbDataHandleSuccess {\n    messageId?: string;\n    key: string;\n}\n\nexport interface IWebComponentData {\n    url: string;\n    created?: number;\n    messageId?: string;\n    jsonLd: IAnyObject[];\n    json: IAnyObject;\n}\n\nexport interface ISaveWebComponentDataWorker extends ISaveWebComponentData {}\n\nexport interface IMessageQueueEntry {\n    resolve: (result: any) => void;\n    reject: (reason: Error) => void;\n}\n\nexport interface IQueue extends NonNullable<Pick<IMessageQueueEntry, 'resolve' | 'reject'>> {\n    key: string;\n}\n\nexport interface IQueueHandleExpiredQueueEntry {\n    key: string;\n    queueEntry: IMessageQueueEntry;\n}\n\nexport interface ILoadData {\n    url: string;\n    loadJsonJsonLd?: boolean;\n}\n\nexport interface ILoadDataGetFeldData {\n    key: string;\n    urls: string[];\n}\n\nexport interface ILoadDataGetJsonJsonLd extends IJsonJsonLd {}\n\nexport interface IGetMicrodataCaption {\n    imageData: IAnyObject;\n    fieldKey: string;\n}\n\nexport interface IGetTemplate {\n    selector: Selector;\n    attributes?: IAttributes;\n    properties?: IProperties;\n}\n\nexport interface IProperties {\n    name?: string;\n    src?: string;\n    alt?: string;\n    innerHTML?: string;\n}\n\nexport interface IGetTabLink {\n    href: string;\n    text: string;\n}\n\nexport type WebComponentDataResolve = (webComponent: IJsonData | undefined) => void;\n\nexport type ErrorResolve = (error: Error) => void;\n\nexport type MessageResponse = IMessageAction | undefined | null | false;\n\nexport type TsLibType = typeof tslib;\n\nexport type TsLibKey = keyof TsLibType;\n\nexport type TsLib = {\n    [K in TsLibKey]: TsLibType[K]\n}\n\nexport type LocalScriptParams = ILoadLocalScriptParams & ILoadScriptParams;\n\nexport type LocalStylesheetScriptParams = ILoadLocalScriptParams & ILoadStylesheetScriptParams;\n\nexport type LoadScriptParams = LocalScriptParams\n    | LocalStylesheetScriptParams\n    | ILoadRemoteScriptParams\n    | ILoadRemoteStylesheetScriptParams;\n\nexport type LoadScriptsParams = LoadScriptParams[];\n\nexport type LoadScriptsSequentiallyParams = LoadScriptsParams[];\n\nexport type DependencyKey = keyof typeof Dependency;\n\nexport type LoadedScript<P extends ILoadScript['params']> =\n    P extends ILoadScriptParams ? HTMLScriptElement :\n    P extends ILoadStylesheetScriptParams ? HTMLStyleElement :\n    P extends ILoadRemoteScriptParams ? HTMLScriptElement :\n    P extends ILoadRemoteStylesheetScriptParams ? HTMLLinkElement :\n    never;\n\nexport type LoadedScripts<P extends LoadScriptsParams> =\n    P extends ILoadScriptParams[] ? HTMLScriptElement[] :\n    P extends ILoadStylesheetScriptParams[] ? HTMLStyleElement[] :\n    P extends ILoadRemoteScriptParams[] ? HTMLScriptElement[] :\n    P extends ILoadRemoteStylesheetScriptParams[] ? HTMLLinkElement[] :\n    never;\n\nexport type LoadedScriptsSequentially<P extends LoadScriptsSequentiallyParams> =\n    P extends ILoadScriptParams[][] ? HTMLScriptElement[] :\n    P extends ILoadStylesheetScriptParams[][] ? HTMLStyleElement[] :\n    P extends ILoadRemoteScriptParams[][] ? HTMLScriptElement[] :\n    P extends ILoadRemoteStylesheetScriptParams[][] ? HTMLLinkElement[] :\n    never;\n\nexport type GetElementParams = IGetElementTemplate | IGetElementUrl;\n\nexport type VamtigerBrowserMethod = {\n    loadScript: <P extends LocalScriptParams | LocalStylesheetScriptParams | ILoadRemoteScriptParams | ILoadRemoteStylesheetScriptParams>(params: P) => Promise<LoadedScript<P>>;\n    loadScripts: <P extends LoadScriptParams[]>(params: P) => Promise<LoadedScripts<P>>;\n    loadScriptsSequentially: <P extends LoadScriptParams[][]>(params: P) => Promise<LoadedScriptsSequentially<P>>;\n    loadShadowStylesheet: ({ css, element }: ILoadShadowStylesheet) => void;\n    defineCustomElement: ({ name, constructor, ignore }: IDefineCustomElement) => void;\n    pause: ({ milliseconds }: IPause) => Promise<unknown>;\n    getElement: <P extends GetElementParams>(params: P) => Promise<HTMLElement>;\n    getData: ({ jsonLd }: IGetData) => Promise<IJsonData>;\n    getEnvironment: () => Environment;\n    environment: Environment;\n    getMicrodataCaption: (params: IGetMicrodataCaption) => HTMLElement | null | undefined\n    messageQueue: Map<string, Set<IMessageQueueEntry>>;\n    worker?: Worker;\n    support?: ISupport;\n    workerSupport?: ISupport;\n    getJsonLdArray: ({ jsonLd }: IGetJsonLdArray) => Promise<string[][]>;\n};\n\nexport interface IAttributes {\n    id?: string;\n    for?: string;\n    slot?: string;\n    'data-image-figure'?: string;\n    'data-json-ld'?: string;\n    itemprop?: string;\n}\n\nexport type JsonDataResolve = (data: IJsonData) => void;\n\nexport type WorkerPostMessage = (message: string | Uint8Array) => void;\n\nexport type GetIndexedDbData<P extends IGetIndexedDbData> =\n    P['keyPath'] extends DbKeyPath.webComponent ? IWebComponentData | undefined :\n    P['keyPath'] extends DbKeyPath.support ? ISaveSupport :\n    never;\n\nexport type DbKeyPathName = keyof typeof DbKeyPath;\n\nexport type DbStoreNameKey = keyof typeof DbStoreName;\n\nexport type AttributesKey = keyof IAttributes;\n\nexport type GetTemplate<P extends IGetTemplate> =\n    P['selector'] extends Selector.a ? HTMLAnchorElement :\n    P['selector'] extends  Selector.linkedDataCaptionElement ? HTMLSpanElement :\n    P['selector'] extends Selector.linkedDataCaption ? HTMLElement :\n    null;\n\ndeclare global {\n    interface Window extends TsLib {\n        VamtigerBrowserMethod: VamtigerBrowserMethod;\n        Babel: any;\n        EQCSS: IAnyObject;\n        requestIdleCallback?: typeof requestIdleCallback;\n        _: typeof lodash;\n    }\n\n    namespace NodeJS {\n        interface  Global {\n            VamtigerBrowserMethod: Window['VamtigerBrowserMethod'];\n        }\n    }\n}\n\nexport const regex = {\n    showRootHost: /:{1,2}host/gm,\n    dash: new RegExp(StringConstant.dash, 'g'),\n    space: /\\s/g,\n    nonWord: /\\W+/g,\n    backTicks: /`/gm,\n    remoteUrl: /^http(s)?/i,\n    jsJsonJs: /\\.js\\.json\\.js$/,\n    jsonJs: /\\.json\\.js$/,\n    trailingJs: /\\.js$/,\n    uppercase: /[A-Z]/,\n    leadingAt: /^@/\n}\n\nexport const selector = {\n    worker: [\n        Selector.vamtigerBrowserMethod\n    ].join(StringConstant.comma),\n    redundantScripts: [\n        Selector.vamtigerBrowserMethodJsonJs,\n        Selector.vamtigerBrowserMethodJson,\n        Selector.vamtigerBrowserMethod\n    ].join(StringConstant.comma)\n}\n\nexport const sendMessageFromWorker = postMessage as WorkerPostMessage;","import {\n    StringConstant,\n    Dependency\n} from './types';\n\nconst { slash } = StringConstant;\n\nexport const babel = {\n    presets: ['es2015']\n};\n\nexport const jsonLdEntryValueType = new Set([\n    typeof 1,\n    typeof '',\n    typeof true\n]);\n\nexport const dependencyPaths = Array.from(new Set([\n    'lodash/lodash.min.js'\n]));\n\nexport const getDependencies = () => [\n    !self._ && Dependency.lodash || ''\n].filter(dependency => dependency);","import { resolve as resolvePath, basename } from 'path';\nimport { expect } from 'chai';\nimport copyFile from 'vamtiger-copy-file';\nimport getFolderContent from 'vamtiger-get-directory-content';\nimport createFile from 'vamtiger-create-file';\nimport {\n    dependencyPaths\n} from '../config'\n\nconst buildFolder = resolvePath(\n    __dirname,\n    '..'\n);\nconst testHtmlSource = resolvePath(\n    __dirname,\n    '../../source/test/html/test.html'\n);\nconst testHtmlDestination = resolvePath(\n    __dirname,\n    '../index.html'\n);\nconst testTemplateSource = resolvePath(\n    __dirname,\n    '../../source/test/html/template.html'\n);\nconst testTemplateDestination = resolvePath(\n    __dirname,\n    '../template.html'\n);\nconst emptyScript = resolvePath(\n    __dirname,\n    'empty-script.js'\n);\nconst emptyStylesheet = resolvePath(\n    __dirname,\n    'empty-stylesheet.css'\n);\nconst dependencyParams = dependencyPaths\n    .map(dependency => resolvePath(__dirname, '../../node_modules', dependency))\n    .map(source => ({source, destination: resolvePath(__dirname, `../${basename(source)}`)}));\n\ndescribe('Generate', function () {\n    before(async function () {\n        await Promise.all([\n            copyFile({\n                source: testHtmlSource,\n                destination: testHtmlDestination\n            }),\n            copyFile({\n                source: testTemplateSource,\n                destination: testTemplateDestination\n            }),\n            createFile(emptyScript, `console.log('Empty Script');`),\n            createFile(emptyStylesheet, ''),\n            Promise.all(dependencyParams.map(copyFile))\n        ]);\n    });\n\n    it('Test Preview', async function() {\n        const folderContent = await getFolderContent(buildFolder)\n            .then(result => new Set(result));\n\n        class Test {\n            test() {\n                console.log();\n            }\n        }\n\n        const test = new Test();\n        test.test();\n\n        expect(folderContent.has(basename(testHtmlDestination))).to.be.true;\n    })\n});"],"names":["__extends","__assign","__rest","__decorate","__param","__metadata","__awaiter","__generator","__exportStar","__values","__read","__spread","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","Environment","TimeoutDuration","MessageQueueName","Prefix","Origin","HostName","LocalHostRelativePath","ScriptType","ScriptAttribute","DataAttribute","ErrorMessage","StringConstant","TagName","LinkRel","LoadScriptElement","Selector","MetaElementName","ScriptNameSuffix","MessageAction","DbName","DbStoreName","DbMode","DbKeyPath","Dependency","factory","root","global","self","this","createExporter","exports","previous","Object","create","defineProperty","value","__esModule","id","v","define","amd","module","exporter","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","assign","t","s","i","n","arguments","length","call","e","indexOf","getOwnPropertySymbols","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","paramIndex","decorator","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","pop","push","m","o","ar","error","concat","asyncIterator","q","a","resume","fulfill","settle","shift","cooked","raw","mod","k","default","regex","showRootHost","dash","RegExp","space","nonWord","backTicks","remoteUrl","jsJsonJs","jsonJs","trailingJs","uppercase","leadingAt","selector","worker","vamtigerBrowserMethod","join","comma","redundantScripts","vamtigerBrowserMethodJsonJs","vamtigerBrowserMethodJson","slash","dependencyPaths","from","Set","buildFolder","resolvePath","__dirname","testHtmlSource","testHtmlDestination","testTemplateSource","testTemplateDestination","emptyScript","emptyStylesheet","dependencyParams","map","dependency","source","destination","basename","describe","before","all","copyFile","createFile","_a","it","getFolderContent","folderContent","Test","console","log","test","expect","has","to","be","true"],"mappings":"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"}